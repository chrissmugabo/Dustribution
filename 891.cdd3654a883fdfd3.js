"use strict";(self.webpackChunktame_accommodation=self.webpackChunktame_accommodation||[]).push([[891],{9891:(h,_,s)=>{s.r(_),s.d(_,{RoomsComponent:()=>y});var c=s(6814),g=s(1384),d=s(6166),b=s(6084),i=s(739),u=s(9416),f=s(7945),a=s(6223),v=s(4966),t=s(9212),Z=s(8950),M=s(4255),A=s(7911),T=s(7612);const U=["roomModal"],R=["roomImage"];function C(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"tr",48)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"app-lazy-image",49),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"formatMoney"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td")(21,"div",50)(22,"button",51),t._UZ(23,"i",52),t.qZA(),t.TgZ(24,"ul",53)(25,"li")(26,"a",54),t.NdJ("click",function(){const n=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.showRoomModal(n))}),t._UZ(27,"i",55),t._uU(28," Edit "),t.qZA()(),t.TgZ(29,"li")(30,"a",56),t.NdJ("click",function(){const n=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.handleDestroy(n))}),t._UZ(31,"i",57),t._uU(32," Delete "),t.qZA()()()()()()}if(2&l){const e=p.$implicit,r=t.oxw();t.xp6(2),t.hij("#",e.id,""),t.xp6(2),t.Oqu(null==e?null:e.title),t.xp6(2),t.Q6J("src",r.getRoomImage(null==e?null:e.image)),t.xp6(2),t.Oqu(t.lcZ(9,9,null==e?null:e.price)),t.xp6(3),t.Oqu(null==e?null:e.number),t.xp6(2),t.Oqu(null==e?null:e.beds),t.xp6(2),t.Oqu(null==e?null:e.size),t.xp6(2),t.Oqu(null==e?null:e.adults),t.xp6(2),t.Oqu(null==e?null:e.children)}}function E(l,p){if(1&l&&t._UZ(0,"input",63),2&l){const e=p.index;t.MGl("id","assignment-",e,""),t.Q6J("formControlName",e)}}function x(l,p){if(1&l&&(t.TgZ(0,"div",58)(1,"div",59)(2,"h5",60),t._uU(3," Rooms ("),t.TgZ(4,"small"),t._uU(5),t.qZA(),t._uU(6,") "),t.qZA(),t.TgZ(7,"div",61),t.YNc(8,E,1,2,"input",62),t.qZA()()()),2&l){const e=t.oxw();t.xp6(5),t.Oqu(e.assignments.length),t.xp6(3),t.Q6J("ngForOf",e.assignments.controls)}}let y=(()=>{class l{constructor(e,r,o,n,m){this.paginationService=e,this.roomService=r,this.toastService=o,this.uiService=n,this.fb=m,this.rows=[],this.columns=[{title:"S/N"},{title:"Title",sortable:!0},{title:"Image"},{title:"Price",sortable:!0},{title:"Number",sortable:!0},{title:"Beds",sortable:!0},{title:"Size",sortable:!0},{title:"Adults",sortable:!0},{title:"Children",sortable:!0}],this.roomForm=this.fb.group({id:0,title:["",a.kI.required],price:[0,a.kI.required],number:[1,a.kI.required],adults:[0],children:[0],size:[0],beds:[0],status:[""],content:[""],assignments:this.fb.array([])})}ngOnInit(){this.paginationService.rows$.subscribe(e=>{this.rows=e})}get assignments(){return this.roomForm.get("assignments")}setAssignments(){const e=this.roomForm.value.number;if(e){const r=this.assignments.length;if(e<r)this.assignments.removeAt(e);else for(let o=r;o<e;o++)this.assignments.push(this.fb.control(""))}else this.roomForm.controls.assignments=this.fb.array([])}getRoomImage(e){return f._.getImageFromServer(e)}showRoomModal(e){e?(this.roomForm.controls.assignments=this.fb.array([]),this.roomForm.patchValue(e),this.existingRoomImage=e.image,e.rooms.length?e.rooms.forEach(r=>{this.assignments.push(this.fb.control(r.name))}):this.setAssignments()):this.setAssignments(),this.roomModal.show()}handleSubmit(){const r=this.roomForm.value;r.assignments=this.assignments.value.filter(m=>""!==m);const o=f._.generateFormData(r),n=this.roomImage.getUploadedFile();n&&n.length&&o.append("image",n[0],n[0]?.name),this.roomService.save(o).subscribe(m=>{const{row:O}=m;this.rows.unshift(O),this.toastService.setMessage({type:"success",text:"Room saved successfully"}),this.roomForm.reset()})}handleDestroy(e){this.uiService.confirm({title:"Deleting a room",content:"Are you sure you want to this room:"+e.title,action:()=>{this.roomService.delete(e.id).subscribe(()=>{const r=this.rows.findIndex(o=>o.id==e.id);-1!==r&&(this.rows.splice(r,1),this.toastService.setMessage({type:"success",text:"Record deleted successfully"}))})}})}static#t=this.\u0275fac=function(r){return new(r||l)(t.Y36(Z.N),t.Y36(M.X),t.Y36(A.k),t.Y36(T.F),t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-rooms"]],viewQuery:function(r,o){if(1&r&&(t.Gf(U,5),t.Gf(R,5)),2&r){let n;t.iGM(n=t.CRH())&&(o.roomModal=n.first),t.iGM(n=t.CRH())&&(o.roomImage=n.first)}},standalone:!0,features:[t.jDz],decls:79,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],["href","javascript: void(0);"],[1,"breadcrumb-item","active"],["url","rooms",3,"columns"],["href","javascript:void(0)","prevent","","action","",1,"btn","btn-primary",3,"click"],[1,"ri-add-line","me-1","fs-16","align-middle"],["filters","",1,"d-flex","py-3","align-items-center","gap-3"],["rows","",4,"ngFor","ngForOf"],[3,"customId"],["roomModal",""],["title",""],["body",""],[1,"auth-input",3,"formGroup","ngSubmit"],[1,"row","gy-1","gx-1"],[1,"mb-0"],["for","title",1,"form-label","required"],["type","text","id","title","placeholder","Room Name","formControlName","title",1,"form-control"],[1,"d-flex","justify-content-center","w-100"],[1,"text-center"],[1,"h5"],[3,"url"],["roomImage",""],[1,"col-6"],["for","price",1,"form-label","required"],["type","number","id","price","placeholder","Price","formControlName","price",1,"form-control"],["for","rooms_no",1,"form-label","required"],["type","number","id","rooms_no","placeholder","Number","formControlName","number",1,"form-control",3,"input"],["for","beds",1,"form-label"],["type","number","id","beds","placeholder","Beds","formControlName","beds",1,"form-control"],["for","room_size",1,"form-label"],[1,"input-group"],["type","number","id","room_size","placeholder","Room Size","formControlName","size",1,"form-control"],[1,"input-group-text"],["for","adults",1,"form-label"],["type","number","id","adults","placeholder","","formControlName","adults",1,"form-control"],["for","children",1,"form-label"],["type","number","id","children","placeholder","","formControlName","children",1,"form-control"],["class","col-lg-12",4,"ngIf"],["footer","",1,"row"],["type","button",1,"btn","btn-light","w-100"],["task","ADDING_ROOM","classes","btn btn-primary w-100","type","button",1,"w-100",3,"disabled","clicked"],["caption",""],["rows",""],["classes","avatar-xs rounded me-2",3,"src"],[1,""],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-soft-primary","btn-sm","dropdown"],[1,"ri-more-fill","align-middle","fs-18"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0);","prevent","",1,"dropdown-item",3,"click"],[1,"ri-pencil-fill","fs-18","align-middle","me-2","text-muted"],["href","javascript:void(0)","prevent","",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ri-delete-bin-line","fs-18","align-middle","me-2","text-muted"],[1,"col-lg-12"],["formArrayName","assignments",1,"py-3"],[1,"mb-2"],[2,"display","grid","grid-template-columns","repeat(3, 1fr)","gap","10px"],["type","text","class","form-control input-sm","placeholder","Eg: 1001",3,"id","formControlName",4,"ngFor","ngForOf"],["type","text","placeholder","Eg: 1001",1,"form-control","input-sm",3,"id","formControlName"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t._uU(4,"Rooms List"),t.qZA(),t.TgZ(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),t._uU(9,"Rooms"),t.qZA()(),t.TgZ(10,"li",8),t._uU(11,"List"),t.qZA()()()()()(),t.TgZ(12,"app-pagination",9)(13,"a",10),t.NdJ("click",function(){return o.showRoomModal()}),t._UZ(14,"i",11),t._uU(15," Add New "),t.qZA(),t._UZ(16,"div",12),t.YNc(17,C,33,11,"tr",13),t.qZA(),t.TgZ(18,"app-off-canvas",14,15)(20,"span",16),t._uU(21,"Add Room"),t.qZA(),t.TgZ(22,"div",17)(23,"form",18),t.NdJ("ngSubmit",function(){return o.handleSubmit()}),t.TgZ(24,"div",19)(25,"div",1)(26,"div",20)(27,"label",21),t._uU(28,"Room Name"),t.qZA(),t._UZ(29,"input",22),t.qZA()(),t.TgZ(30,"div",1)(31,"div",23)(32,"div",24)(33,"label",25),t._uU(34,"Room Image"),t.qZA(),t._UZ(35,"app-upload-field",26,27),t.qZA()()(),t.TgZ(37,"div",28)(38,"div",20)(39,"label",29),t._uU(40,"Price"),t.qZA(),t._UZ(41,"input",30),t.qZA()(),t.TgZ(42,"div",28)(43,"div",20)(44,"label",31),t._uU(45,"Number of room"),t.qZA(),t.TgZ(46,"input",32),t.NdJ("input",function(){return o.setAssignments()}),t.qZA()()(),t.TgZ(47,"div",28)(48,"div",20)(49,"label",33),t._uU(50,"Number of beds"),t.qZA(),t._UZ(51,"input",34),t.qZA()(),t.TgZ(52,"div",28)(53,"div",20)(54,"label",35),t._uU(55,"Room Size"),t.qZA(),t.TgZ(56,"div",36),t._UZ(57,"input",37),t.TgZ(58,"span",38),t._uU(59,"sqft"),t.qZA()()()(),t.TgZ(60,"div",28)(61,"div",20)(62,"label",39),t._uU(63,"Max Adults"),t.qZA(),t._UZ(64,"input",40),t.qZA()(),t.TgZ(65,"div",28)(66,"div",20)(67,"label",41),t._uU(68,"Max Children"),t.qZA(),t._UZ(69,"input",42),t.qZA()(),t.YNc(70,x,9,2,"div",43),t.qZA()()(),t.TgZ(71,"div",44)(72,"div",28)(73,"button",45),t._uU(74,"Reset"),t.qZA()(),t.TgZ(75,"div",28)(76,"app-button",46),t.NdJ("clicked",function(){return o.handleSubmit()}),t.TgZ(77,"span",47),t._uU(78,"Save"),t.qZA()()()()()),2&r&&(t.xp6(12),t.Q6J("columns",o.columns),t.xp6(5),t.Q6J("ngForOf",o.rows),t.xp6(1),t.Q6J("customId","roomModal"),t.xp6(5),t.Q6J("formGroup",o.roomForm),t.xp6(12),t.Q6J("url",o.existingRoomImage?o.getRoomImage(o.existingRoomImage):null),t.xp6(35),t.Q6J("ngIf",o.assignments.length),t.xp6(6),t.Q6J("disabled",!o.roomForm.valid))},dependencies:[b.Q,c.ax,c.O5,i.X,g.r,d.i,u.s,a.UX,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.CE,v.l]})}return l})()},4966:(h,_,s)=>{s.d(_,{l:()=>g});var c=s(9212);let g=(()=>{class d{transform(i,...u){return u[0]?"RWF "+this.formatNumber(i):(i.toString().indexOf(".")>-1&&(i=Number(i).toFixed(0)),"RWF "+i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}formatNumber(i){return 999<Math.abs(i)&&Math.abs(i)<999999?Math.sign(i)*Number((Math.abs(i)/1e3).toFixed(1))+"K":999999<Math.abs(i)&&Math.abs(i)<999999999?Math.sign(i)*Number((Math.abs(i)/1e6).toFixed(1))+"M":999999999<Math.abs(i)&&Math.abs(i)<999999999999?Math.sign(i)*Number((Math.abs(i)/1e9).toFixed(1))+"B":999999999999<Math.abs(i)?Math.sign(i)*Number((Math.abs(i)/1e12).toFixed(1))+"T":""+Math.sign(i)*Math.abs(i)}static#t=this.\u0275fac=function(u){return new(u||d)};static#e=this.\u0275pipe=c.Yjl({name:"formatMoney",type:d,pure:!0,standalone:!0})}return d})()}}]);