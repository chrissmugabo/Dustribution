"use strict";(self.webpackChunktame_accommodation=self.webpackChunktame_accommodation||[]).push([[247],{5222:(v,f,a)=>{a.r(f),a.d(f,{PermissionsComponent:()=>T});var d=a(6223),s=a(1384),t=a(9212),_=a(6814);const x=[[["","title",""]],[["","body",""]]],P=["[title]","[body]"];let O=(()=>{class i{constructor(e){this.location=e}handleClose(){this.location.back()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(_.Ye))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-page-modal"]],standalone:!0,features:[t.jDz],ngContentSelectors:P,decls:13,vars:0,consts:[[1,"BaseModal","v-modal","modal__backdrop","ModalAccountCreate","TheModal","is--full","base-modal"],["aria-labelledby","modal-headline","aria-modal","true","role","dialog",1,"modal__container"],[1,"modal__header-solid","modal__header"],[1,"modal__header-title"],["type","button",1,"modal__close-button","border-0","bg-transparent",3,"click"],["width","16","height","16","viewBox","0 0 16 16","xmlns","http://www.w3.org/2000/svg",1,"modal__close-button-icon","svg-icon","close-icon"],["id","X mark"],["id","Vector","d","M13.134 4.59L14 3.728 12.272 2l-.862.862L8 6.272 4.59 2.866 3.728 2 2 3.728l.862.862L6.272 8l-3.406 3.41-.866.862L3.728 14l.862-.862L8 9.728l3.41 3.41.862.862L14 12.272l-.862-.862L9.728 8l3.41-3.41h-.004z","fill","inherit"],[1,"modal__content","pt-3"],[1,"modal-account-create__container"],[1,"modal-account-create__footer-row"]],template:function(n,o){1&n&&(t.F$t(x),t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t.Hsn(4),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.handleClose()}),t.O4$(),t.TgZ(6,"svg",5)(7,"g",6),t._UZ(8,"path",7),t.qZA()()()(),t.kcU(),t.TgZ(9,"div",8)(10,"div",9),t.Hsn(11,1),t._UZ(12,"div",10),t.qZA()()()())},styles:[".v-modal[_ngcontent-%COMP%]{--modal-content-small-padding: 24px;position:relative;width:50%;height:50%;background-color:#fff;overflow:hidden;text-align:left;pointer-events:auto}.v-modal[_ngcontent-%COMP%]   .modal__content[_ngcontent-%COMP%]{padding:0 24px 24px}.v-modal.is--full[_ngcontent-%COMP%]{width:100%;height:100%;padding:0;z-index:9999}.v-modal.is--full[_ngcontent-%COMP%]   .modal__container[_ngcontent-%COMP%]{width:100%;max-width:100%;height:100%;padding-top:0;animation:_ngcontent-%COMP%_fade-in-up-13da0c94 .3s;background-color:#f2f4f5}.v-modal.is--full[_ngcontent-%COMP%]   .modal__container[_ngcontent-%COMP%]   .modal__content[_ngcontent-%COMP%]{padding:60px 40px 110px}@media screen and (max-width: 767px){.v-modal.is--full[_ngcontent-%COMP%]   .modal__container[_ngcontent-%COMP%]   .modal__content[_ngcontent-%COMP%]{padding:45px 12px 100px}}.modal__backdrop[_ngcontent-%COMP%]{position:fixed;z-index:100;overflow-y:auto;inset:0;width:100%;height:100%;background-color:#12171c80;-webkit-backdrop-filter:blur(6.7957px);backdrop-filter:blur(6.7957px)}.modal__container[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:hidden;position:relative;z-index:999;background-color:#fff;max-width:946px;width:100%}.modal__header[_ngcontent-%COMP%]{padding:24px 24px 16px;text-align:center;position:relative;top:0;left:0;right:0;z-index:2;width:100%;display:flex;align-items:center}.modal__header-title[_ngcontent-%COMP%]{margin-bottom:0;flex:1}.modal__header-title[_ngcontent-%COMP%] + .modal__close-button[_ngcontent-%COMP%]{position:absolute;right:30px}.modal__header-solid[_ngcontent-%COMP%]{background-color:var(--tb-primary);box-shadow:0 1px 15px #0000000d;padding:14px 30px}@media screen and (max-width: 767px){.modal__header-solid[_ngcontent-%COMP%]{padding:14px 12px}}.modal__header-solid[_ngcontent-%COMP%]   .modal__close-button[_ngcontent-%COMP%]{align-self:center;fill:#fff}@media screen and (max-width: 767px){.modal__header-solid[_ngcontent-%COMP%]   .modal__close-button[_ngcontent-%COMP%]{right:12px}}.modal__header-solid[_ngcontent-%COMP%]   .modal__header-title[_ngcontent-%COMP%]{color:#fff;margin:0 30px}.modal__content[_ngcontent-%COMP%]{overflow-y:scroll;overflow-x:hidden;height:100%;margin:0 auto}.modal__close-button[_ngcontent-%COMP%]{cursor:pointer;margin-left:auto;align-self:flex-start}.modal__close-button-icon[_ngcontent-%COMP%]{width:20px;height:20px}.modal-account-create__container[data-v-92bcd4e4][_ngcontent-%COMP%]{width:100%;max-width:950px;margin:0 auto;flex-direction:column;min-height:100vh}@media screen and (max-width: 767px){.modal-account-create__container[data-v-92bcd4e4][_ngcontent-%COMP%]{margin:6px auto}}.modal-account-create__cancel-row[data-v-92bcd4e4][_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-top:29px;margin-bottom:82px}@media screen and (max-width: 767px){.modal-account-create__cancel-row[data-v-92bcd4e4][_ngcontent-%COMP%]{margin-bottom:75px;margin-top:33px}}@keyframes _ngcontent-%COMP%_fade-in-up-13da0c94{0%{transform:translateY(100%)}to{transform:translateY(0)}}"]})}return i})();var u=a(9086),l=a(8494),m=a(7485),p=a(7890),h=a(1474),g=a(7911);function C(i,b){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",25),t._uU(2),t.qZA(),t.TgZ(3,"td",21)(4,"div",14)(5,"input",26),t.NdJ("change",function(o){t.CHM(e);const c=t.oxw().$implicit,r=t.oxw(2).$implicit,M=t.oxw(2);return t.KtG(M.grantFullAccess(o,c,r))}),t.qZA()()(),t.TgZ(6,"td",21)(7,"div",14)(8,"input",27),t.NdJ("change",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.togglePermission(c,o,"R"))}),t.qZA()()(),t.TgZ(9,"td",21)(10,"div",14)(11,"input",28),t.NdJ("change",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.togglePermission(c,o,"C"))}),t.qZA()()(),t.TgZ(12,"td",21)(13,"div",14)(14,"input",29),t.NdJ("change",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.togglePermission(c,o,"U"))}),t.qZA()()(),t.TgZ(15,"td",21)(16,"div",14)(17,"input",30),t.NdJ("change",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.togglePermission(c,o,"D"))}),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(o.titleFromSlug(e)),t.xp6(3),t.Q6J("id",e+"-full"),t.xp6(3),t.Q6J("id",e+"-view")("checked",o.permissions[n][e].includes("R")),t.xp6(3),t.Q6J("id",e+"-create")("checked",o.permissions[n][e].includes("C")),t.xp6(3),t.Q6J("id",e+"-edit")("checked",o.permissions[n][e].includes("U")),t.xp6(3),t.Q6J("id",e+"-delete")("checked",o.permissions[n][e].includes("D"))}}function k(i,b){if(1&i&&(t.ynx(0),t.YNc(1,C,18,10,"tr",24),t.BQk()),2&i){const e=b.$implicit;t.xp6(1),t.Q6J("ngIf","accessible"!==e)}}function y(i,b){if(1&i&&(t.TgZ(0,"table",18)(1,"colgroup"),t._UZ(2,"col")(3,"col",19),t.qZA(),t.TgZ(4,"thead")(5,"tr"),t._UZ(6,"th",20),t.TgZ(7,"th",21),t._uU(8,"Full Access"),t.qZA(),t.TgZ(9,"th",22),t._uU(10,"view"),t.qZA(),t.TgZ(11,"th",21),t._uU(12,"Create"),t.qZA(),t.TgZ(13,"th",21),t._uU(14,"Edit"),t.qZA(),t.TgZ(15,"th",21),t._uU(16,"Delete"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,k,2,1,"ng-container",23),t.qZA()()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(18),t.Q6J("ngForOf",n.Object.keys(n.permissions[e]))}}function w(i,b){if(1&i){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"input",15),t.NdJ("ngModelChange",function(o){const r=t.CHM(e).$implicit,M=t.oxw(2);return t.KtG(M.permissions[r].accessible=o)}),t.qZA(),t.TgZ(6,"label",16),t._uU(7),t.qZA()()()(),t.YNc(8,y,19,1,"table",17),t.qZA()()}if(2&i){const e=b.$implicit,n=t.oxw(2);t.xp6(5),t.Q6J("id",e)("ngModel",n.permissions[e].accessible),t.xp6(2),t.Oqu(n.titleFromSlug(e)),t.xp6(1),t.Q6J("ngIf",n.Object.keys(n.permissions[e]).length>1&&n.permissions[e].accessible)}}function Z(i,b){if(1&i&&(t.TgZ(0,"div",8),t.YNc(1,w,9,4,"div",9),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.Object.keys(e.permissions))}}let T=(()=>{class i{constructor(e,n,o,c){this.location=e,this.route=n,this.http=o,this.ts=c,this.Object=Object,this.permissions={},this.routeName=l.n,this.titleFromSlug=m.Fg,this.menus=u.I}ngOnInit(){const e={};[...this.menus].forEach(n=>{if(e[n.title]={accessible:!0},n.submenus)for(let o in n.submenus)e[(0,m.gk)(n.title)][o]=[];else if("reports"==n.title)for(let o in u.G)u.G[o].forEach(c=>{const r=c.name.toLowerCase().replaceAll(" ","_");e[n.title][r]=[]});else e[n.title].access=[]}),this.route.paramMap.subscribe(n=>{const o=Number(n.get("id"));this.http.get(`roles/show/${o}`).subscribe(c=>{this.currentRole=c,this.permissions=c.permissions?(0,m.Ee)(e,c.permissions):e})})}grantFullAccess(e,n,o){this.permissions[o][n]=e.target.checked?["C","R","U","D"]:[]}togglePermission(e,n,o){if(Array.isArray(this.permissions[e][n])){const c=this.permissions[e][n].indexOf(o);-1===c?this.permissions[e][n].push(o):this.permissions[e][n].splice(c,1)}}handleSave(){this.http.post("roles/store",(0,m.PY)({permissions:this.permissions,id:this.currentRole?.id})).subscribe(()=>{this.ts.setMessage({type:"success",text:"Record saved successfully"}),this.location.back()})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(_.Ye),t.Y36(p.gz),t.Y36(h.eN),t.Y36(g.k))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-permissions"]],standalone:!0,features:[t.jDz],decls:11,vars:4,consts:[["title",""],["body","",1,"row","justify-content-center"],[1,"col-lg-7","col-md-8"],["class","pb-0",4,"ngIf"],[1,"col-sm-12"],[1,"d-grid"],["classes","btn btn-primary","type","button",3,"task","disabled","clicked"],["caption",""],[1,"pb-0"],["class","ember-view",4,"ngFor","ngForOf"],[1,"ember-view"],[1,"card","mb-5"],[1,"card-header"],[1,"card-title","font-large","mb-0","text-capitalize"],[1,"form-check"],["type","checkbox",1,"ember-checkbox","ember-view","form-check-input",3,"id","ngModel","ngModelChange"],["for","a05c3054f",1,"form-check-label"],["class","table table-bordered role-table mb-0",4,"ngIf"],[1,"table","table-bordered","role-table","mb-0"],[2,"background","#fcfcfc"],[2,"min-width","150px"],[1,"permission"],[1,"permission","text-capitalize"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-capitalize"],["type","checkbox",1,"ember-checkbox","ember-view","form-check-input","position-static",3,"id","change"],["type","checkbox","value","R",1,"ember-checkbox","ember-view","form-check-input","position-static",3,"id","checked","change"],["type","checkbox","value","C",1,"ember-checkbox","ember-view","form-check-input","position-static",3,"id","checked","change"],["type","checkbox","value","U",1,"ember-checkbox","ember-view","form-check-input","position-static",3,"id","checked","change"],["type","checkbox","value","D",1,"ember-checkbox","ember-view","form-check-input","position-static",3,"id","checked","change"]],template:function(n,o){1&n&&(t.TgZ(0,"app-page-modal")(1,"span",0),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"div",2),t.YNc(5,Z,2,1,"div",3),t.TgZ(6,"div",4)(7,"div",5)(8,"app-button",6),t.NdJ("clicked",function(){return o.handleSave()}),t.TgZ(9,"span",7),t._uU(10,"Save Changes"),t.qZA()()()()()()()),2&n&&(t.xp6(2),t.hij("Set Permissions for ",null==o.currentRole?null:o.currentRole.name,""),t.xp6(3),t.Q6J("ngIf",o.permissions&&o.Object.keys(o.permissions).length>0),t.xp6(3),t.Q6J("task","SAVING_RECORDS")("disabled",!1))},dependencies:[O,s.r,d.u5,d.Wl,d.JJ,d.On,_.ax,_.ez,_.O5],styles:["label[_ngcontent-%COMP%]{margin-bottom:.5rem}label[_ngcontent-%COMP%]{display:inline-block}input[_ngcontent-%COMP%]{overflow:visible}table[_ngcontent-%COMP%]{border-collapse:collapse}input[_ngcontent-%COMP%]{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input[type=checkbox][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}label[_ngcontent-%COMP%]{font-weight:400}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;color:#212529}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;vertical-align:top;border-top:1px solid #eee}.table-bordered[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #eee}.table-bordered[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:2px}.card[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%]{border:0}.card[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-of-type, .card[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-of-type{border-left:0}.card[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:last-of-type, .card[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:last-of-type{border-right:0}.card[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-of-type > td[_ngcontent-%COMP%], .card[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:last-of-type > td[_ngcontent-%COMP%], .card[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:first-of-type > td[_ngcontent-%COMP%]{border-bottom:0}.form-check[_ngcontent-%COMP%]{position:relative;display:block;padding-left:1.25rem}.form-check-input[_ngcontent-%COMP%]{position:absolute;margin-left:-1.25rem}.form-check-input[_ngcontent-%COMP%]:disabled ~ .form-check-label[_ngcontent-%COMP%]{color:#777}.form-check-label[_ngcontent-%COMP%]{margin-bottom:0;margin-left:.4rem}input[_ngcontent-%COMP%]::-ms-clear{display:none}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.125);border-radius:.25rem}.card-header[_ngcontent-%COMP%]{padding:.75rem 1.25rem;background-color:#00000008}.card-title[_ngcontent-%COMP%]{margin-bottom:.75rem}.card-header[_ngcontent-%COMP%]{margin-bottom:0}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125)}.card-header[_ngcontent-%COMP%]:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.position-static[_ngcontent-%COMP%]{position:static!important}.mb-5[_ngcontent-%COMP%]{margin-bottom:20px!important}.mb-0[_ngcontent-%COMP%]{margin-bottom:0!important}.text-capitalize[_ngcontent-%COMP%]{text-transform:capitalize!important}.form-check-label[_ngcontent-%COMP%]{cursor:pointer}.form-check-input[_ngcontent-%COMP%]:disabled ~ .form-check-label[_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}[_ngcontent-%COMP%]:focus::-webkit-input-placeholder{opacity:.5}[_ngcontent-%COMP%]:focus:-moz-placeholder{opacity:.5}[_ngcontent-%COMP%]:focus::-moz-placeholder{opacity:.5}[_ngcontent-%COMP%]:focus:-ms-input-placeholder{opacity:.5}.role-table[_ngcontent-%COMP%]   td.permission[_ngcontent-%COMP%]{min-width:70px;text-align:center}svg[_ngcontent-%COMP%]{vertical-align:baseline}.font-large[_ngcontent-%COMP%]{font-size:16px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .permission[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}th[_ngcontent-%COMP%]{text-align:center;padding-left:1.25rem}"]})}return i})()},1384:(v,f,a)=>{a.d(f,{r:()=>u});var d=a(6814),s=a(9212),t=a(9045);function _(l,m){1&l&&s._UZ(0,"span",4)}function x(l,m){1&l&&s.Hsn(0)}const P=[[["","caption",""]]],O=["[caption]"];let u=(()=>{class l{constructor(p){this.apiService=p,this.requests={},this.task="",this.classes="",this.type="submit",this.disabled=!1,this.clicked=new s.vpe}ngOnInit(){this.apiService.request$.subscribe(p=>{this.requests=p})}get isRequesting(){return!!this.requests&&Object.keys(this.requests).includes(this.task)}handleClick(){this.apiService.onGoingRequestFlag=this.task,this.clicked.emit()}static#t=this.\u0275fac=function(h){return new(h||l)(s.Y36(t.s))};static#e=this.\u0275cmp=s.Xpm({type:l,selectors:[["app-button"]],inputs:{task:"task",classes:"classes",type:"type",disabled:"disabled"},outputs:{clicked:"clicked"},standalone:!0,features:[s.jDz],ngContentSelectors:O,decls:6,vars:5,consts:[[3,"type","disabled","ngClass","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf","ngIfElse"],[1,"visually-hidden"],["notRequesting",""],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(h,g){if(1&h&&(s.F$t(P),s.TgZ(0,"button",0),s.NdJ("click",function(){return g.handleClick()}),s.YNc(1,_,1,0,"span",1),s.TgZ(2,"span",2),s._uU(3,"Loading..."),s.qZA(),s.YNc(4,x,1,0,"ng-template",null,3,s.W1O),s.qZA()),2&h){const C=s.MAs(5);s.Q6J("type",g.type)("disabled",g.disabled)("ngClass",g.classes),s.xp6(1),s.Q6J("ngIf",g.isRequesting)("ngIfElse",C)}},dependencies:[d.mk,d.O5]})}return l})()}}]);