(function(){"use strict";var e={6287:function(e,t,n){var a=n(1005);const o=e=>((0,a.pushScopeId)("data-v-52498e24"),e=e(),(0,a.popScopeId)(),e),r={key:0,id:"ember201",class:"notification-message text-center zf-notification-container ember-view",style:{transform:"translateY(0px)",opacity:"1",transition:"transform 0.6s ease 0s"}},l={align:"center"},s={key:0,class:"svg-icon",viewBox:"0 0 17 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},i=o((()=>(0,a.createElementVNode)("path",{"fill-rule":"evenodd",d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 5zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"},null,-1))),c=[i],d={key:1,class:"svg-icon",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},m=o((()=>(0,a.createElementVNode)("path",{"fill-rule":"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"},null,-1))),p=[m],u={key:2,class:"svg-icon",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},h=o((()=>(0,a.createElementVNode)("path",{"fill-rule":"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1))),g=[h],v={key:3,class:"svg-icon",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},E=o((()=>(0,a.createElementVNode)("path",{"fill-rule":"evenodd",d:"M11.46.146A.5.5 0 0 0 11.107 0H4.893a.5.5 0 0 0-.353.146L.146 4.54A.5.5 0 0 0 0 4.893v6.214a.5.5 0 0 0 .146.353l4.394 4.394a.5.5 0 0 0 .353.146h6.214a.5.5 0 0 0 .353-.146l4.394-4.394a.5.5 0 0 0 .146-.353V4.893a.5.5 0 0 0-.146-.353L11.46.146zm-6.106 4.5a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1))),f=[E],b={class:"msg"},N=o((()=>(0,a.createElementVNode)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",viewBox:"0 0 512 512","xml:space":"preserve",class:"icon-remove"},[(0,a.createElementVNode)("path",{d:"M455.2 9.2L256 208.4 56.8 9.2C44.5-3.1 24.6-3.1 12.2 9.2l-2.9 2.9C-3 24.4-3 44.4 9.3 56.7L208.4 256 9.2 455.2c-12.3 12.3-12.3 32.3 0 44.6l2.9 2.9c12.3 12.3 32.3 12.3 44.6 0L256 303.6l199.2 199.2c12.3 12.3 32.3 12.3 44.6 0l2.9-2.9c12.3-12.3 12.3-32.3 0-44.6L303.6 256 502.8 56.8c12.3-12.3 12.3-32.3 0-44.6l-2.9-2.9c-12.5-12.4-32.4-12.4-44.7-.1z"})],-1))),V=[N],y={id:"content",class:"content"},k={class:"d-none"},S={id:"order-preview"},_={class:"d-none"},B={id:"invoice-preview"},w=o((()=>(0,a.createElementVNode)("span",null,"Load Print Settings",-1))),C={class:"form-group mb-3"},x=o((()=>(0,a.createElementVNode)("label",{class:"h4 required"},"Printing Code",-1))),D={class:"d-flex align-items-center",style:{width:"90%"}},T=["onUpdate:modelValue","onKeyup"],L={class:"form-group"},$={key:0,class:"alert alert-danger"},A=o((()=>(0,a.createElementVNode)("span",null," Printing code doesn not exists. Try again. ",-1))),I=[A],O=o((()=>(0,a.createElementVNode)("svg",{height:"24px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"white"},[(0,a.createElementVNode)("path",{d:"M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"}),(0,a.createElementVNode)("path",{"fill-rule":"evenodd",d:"M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"}),(0,a.createElementVNode)("path",{d:"M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"})],-1))),M=[O];function P(e,t,n,o,i,m){const h=(0,a.resolveComponent)("loader"),E=(0,a.resolveComponent)("router-view"),N=(0,a.resolveComponent)("nav-bar"),A=(0,a.resolveComponent)("app-header"),O=(0,a.resolveComponent)("OrderPreview"),P=(0,a.resolveComponent)("InvoicePreview"),R=(0,a.resolveComponent)("bootstrap-modal");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(a.Transition,{name:"bounce"},{default:(0,a.withCtx)((()=>[e.$helper.empty(m.flashMessage)?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",r,[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(`message-container ${m.flashMessage.type}`)},[(0,a.createElementVNode)("div",null,["warning"==m.flashMessage.type?((0,a.openBlock)(),(0,a.createElementBlock)("svg",s,c)):(0,a.createCommentVNode)("",!0),"info"==m.flashMessage.type?((0,a.openBlock)(),(0,a.createElementBlock)("svg",d,p)):(0,a.createCommentVNode)("",!0),"success"==m.flashMessage.type?((0,a.openBlock)(),(0,a.createElementBlock)("svg",u,g)):(0,a.createCommentVNode)("",!0),"danger"==m.flashMessage.type?((0,a.openBlock)(),(0,a.createElementBlock)("svg",v,f)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",b,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(m.flashMessage.message),1)]),(0,a.createElementVNode)("div",{onClick:t[0]||(t[0]=t=>e.$store.commit("SET_FLASH_MESSAGE",{}))},V)],2)])]))])),_:1}),(0,a.createElementVNode)("div",{id:"root",class:(0,a.normalizeClass)("root "+(e.isUserLoggedIn?"mn--max hd--expanded":"front-container"))},[(0,a.createElementVNode)("section",y,[m.globalAjaxRequest?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(E)]),m.appReady?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(N),(0,a.createVNode)(A)],64)):(0,a.createCommentVNode)("",!0)],2),(0,a.createElementVNode)("div",k,[(0,a.createElementVNode)("div",S,[(0,a.createVNode)(O,{round:e.printableRound,order:e.placedOrder,items:e.roundItems},null,8,["round","order","items"])])]),(0,a.createElementVNode)("div",_,[(0,a.createElementVNode)("div",B,[(0,a.createVNode)(P,{order:e.printedInvoice,items:e.invoiceItems},null,8,["order","items"])])]),e.modalOpen?((0,a.openBlock)(),(0,a.createBlock)(R,{key:0,onClose:e.toggleModal,"modal-size":"modal-default"},{head:(0,a.withCtx)((()=>[w])),body:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",C,[x,(0,a.createElementVNode)("div",D,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.inputs,((n,o)=>(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("input",{type:"text",class:"form-control-lg form-control rounded-0 me-2",style:{"font-size":"20px"},"onUpdate:modelValue":t=>e.inputs[o]=t,key:o,onKeyup:e=>m.setPrintingCode(o,e),onPaste:t[1]||(t[1]=e=>m.handlePaste(e)),maxlength:"1",ref_for:!0,ref:"inputRef"},null,40,T)),[[a.vModelText,e.inputs[o]]]))),128))])]),(0,a.createElementVNode)("div",L,[e.invalidPrintingCode?((0,a.openBlock)(),(0,a.createElementBlock)("div",$,I)):(0,a.createCommentVNode)("",!0)])])),_:1},8,["onClose"])):(0,a.createCommentVNode)("",!0),e.isFireFox?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,class:"intercom-cta",onClick:t[2]||(t[2]=(...e)=>m.handlePrintRefesh&&m.handlePrintRefesh(...e))},M)):(0,a.createCommentVNode)("",!0)],64)}const R={class:"header"},F={class:"header__inner"},z={class:"header__brand"},j={class:"brand-wrap"},Z={href:"javascript:void(0)",class:"brand-img stretched-link"},U=["src"],q=(0,a.createElementVNode)("div",{class:"brand-title"},"TAME",-1),H={class:"header__content"},G={class:"header__content-start",style:{"flex-grow":"0"}},K=(0,a.createElementVNode)("button",{type:"button",class:"nav-toggler header__btn btn btn-icon btn-sm"},[(0,a.createElementVNode)("i",{class:"demo-psi-view-list"})],-1),Q={class:"mx-auto"},Y={class:"dropdown"},W={key:0,href:"javascript:void(0)",class:"d-flex flex-nowrap align-items-center"},J=["src"],X={class:"h5 ms-1 text-white mb-0"},ee={key:1,href:"javascript:void(0)",class:"d-flex flex-nowrap align-items-center","data-bs-toggle":"dropdown"},te=["src"],ne={class:"h5 ms-1 text-white mb-0"},ae={class:"dropdown-menu dropdown-menu-end","data-popper-placement":"bottom-end"},oe={class:"list-group list-group-borderless listgroup-search scrollable-content"},re={key:0,class:"list-group-item list-group-item-action d-flex align-items-start mb-2"},le=["onClick"],se={class:"header__content-end"},ie={class:""},ce=(0,a.createElementVNode)("button",{class:"header__btn btn btn-icon btn-sm",type:"button","data-bs-toggle":"dropdown"},[(0,a.createElementVNode)("i",{class:"demo-psi-gear fs-4"})],-1),de={class:"dropdown-menu dropdown-menu-end w-md-250px","data-popper-placement":"bottom-end",style:{}},me={class:"d-flex align-items-center border-bottom px-3 py-2"},pe={class:"flex-shrink-0"},ue={class:"flex-grow-1 ms-3"},he={class:"mb-0"},ge={class:"text-muted fst-italic"},ve={class:"row"},Ee={class:"col-md-12"},fe={class:"list-group list-group-borderless h-100 py-3"},be=(0,a.createElementVNode)("i",{class:"demo-pli-male fs-5 me-2"},null,-1),Ne=(0,a.createElementVNode)("i",{class:"demo-pli-gear fs-5 me-2"},null,-1),Ve=(0,a.createElementVNode)("i",{class:"demo-pli-computer-secure fs-5 me-2"},null,-1),ye=(0,a.createElementVNode)("span",null,"Set Printing Branch",-1),ke=(0,a.createElementVNode)("span",{class:"badge rounded bg-danger p-1 ms-1"},[(0,a.createElementVNode)("span",{class:"visually-hidden"})],-1),Se=[Ve,ye,ke],_e=(0,a.createElementVNode)("i",{class:"demo-pli-unlock fs-5 me-2"},null,-1),Be=(0,a.createElementVNode)("span",null,"Set a printing branch",-1),we={class:"form-group mb-3"},Ce=(0,a.createElementVNode)("option",{value:"null",hidden:"",disabled:""},"Select Branch",-1),xe=["value"],De={class:"form-group"},Te=["disabled"];function Le(e,t,n,o,r,l){const s=(0,a.resolveComponent)("avatar"),i=(0,a.resolveComponent)("router-link"),c=(0,a.resolveComponent)("bootstrap-modal");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("header",R,[(0,a.createElementVNode)("div",F,[(0,a.createElementVNode)("div",z,[(0,a.createElementVNode)("div",j,[(0,a.createElementVNode)("a",Z,[(0,a.createElementVNode)("img",{src:`${e.publicPath}img/logo-min.png`,alt:"TAME Logo",class:"logo",width:"40",height:"40"},null,8,U)]),q])]),(0,a.createElementVNode)("div",H,[(0,a.createElementVNode)("div",G,[K,(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",Q,[(0,a.createElementVNode)("div",Y,[e.$helper.empty(e.loggedUser.branch)?((0,a.openBlock)(),(0,a.createElementBlock)("a",ee,[(0,a.createElementVNode)("img",{src:`${e.publicPath}img/restaurant.png`,class:"img-xs",alt:"Branch Icon"},null,8,te),(0,a.createElementVNode)("span",ne,(0,a.toDisplayString)(e.lockedBranch?.name||"All Branches"),1)])):((0,a.openBlock)(),(0,a.createElementBlock)("a",W,[(0,a.createElementVNode)("img",{src:`${e.publicPath}img/restaurant.png`,class:"img-xs",alt:"Branch Icon"},null,8,J),(0,a.createElementVNode)("span",X,(0,a.toDisplayString)(e.lockedBranch?.name),1)])),(0,a.createElementVNode)("div",ae,[(0,a.createElementVNode)("div",oe,[e.$helper.empty(e.lockedBranch)?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",re,[(0,a.createElementVNode)("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=(0,a.withModifiers)((e=>l.setBranch(null)),["prevent"])),class:"h6 d-block mb-0 stretched-link text-decoration-none"},"All Branches")])),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.branches,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e.id,class:"list-group-item list-group-item-action d-flex align-items-start mb-2"},[(0,a.createElementVNode)("a",{href:"javascript:void(0)",onClick:(0,a.withModifiers)((t=>l.setBranch(e)),["prevent"]),class:"h6 d-block mb-0 stretched-link text-decoration-none"},(0,a.toDisplayString)(e.name),9,le)])))),128))])])])]),(0,a.createElementVNode)("div",se,[(0,a.createElementVNode)("div",ie,[ce,(0,a.createElementVNode)("div",de,[(0,a.createElementVNode)("div",me,[(0,a.createElementVNode)("div",pe,[(0,a.createVNode)(s,{name:e.loggedUser.name,width:"2.25rem",height:"2.25rem"},null,8,["name"])]),(0,a.createElementVNode)("div",ue,[(0,a.createElementVNode)("h5",he,(0,a.toDisplayString)(e.loggedUser.name),1),(0,a.createElementVNode)("span",ge,(0,a.toDisplayString)(e.loggedUser.email),1)])]),(0,a.createElementVNode)("div",ve,[(0,a.createElementVNode)("div",Ee,[(0,a.createElementVNode)("div",fe,[(0,a.createVNode)(i,{to:{name:""},class:"list-group-item list-group-item-action"},{default:(0,a.withCtx)((()=>[be,(0,a.createTextVNode)(" Profile ")])),_:1}),(0,a.createVNode)(i,{to:{name:""},class:"list-group-item list-group-item-action"},{default:(0,a.withCtx)((()=>[Ne,(0,a.createTextVNode)(" Settings ")])),_:1}),(0,a.createElementVNode)("a",{href:"javascript:void(0)",onClick:t[1]||(t[1]=(0,a.withModifiers)(((...t)=>e.toggleModal&&e.toggleModal(...t)),["prevent"])),class:"list-group-item list-group-item-action mt-auto"},Se),(0,a.createElementVNode)("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(0,a.withModifiers)(((...e)=>l.signout&&l.signout(...e)),["prevent"])),class:"list-group-item list-group-item-action"},[_e,(0,a.createTextVNode)(" Logout ")])])])])])])])])])]),e.modalOpen?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,onClose:e.toggleModal,"modal-size":"modal-sm"},{head:(0,a.withCtx)((()=>[Be])),body:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",we,[(0,a.withDirectives)((0,a.createElementVNode)("select",{class:"form-control-lg form-select","onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedBranch=t)},[Ce,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.branches,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("option",{value:e.id,key:e.id},(0,a.toDisplayString)(e.name),9,xe)))),128))],512),[[a.vModelSelect,e.selectedBranch]])]),(0,a.createElementVNode)("div",De,[(0,a.createElementVNode)("button",{type:"button",class:"btn btn-primary w-100 btn-lg",onClick:t[4]||(t[4]=(...e)=>l.setPrintingBranch&&l.setPrintingBranch(...e)),disabled:!e.selectedBranch}," Confirm ",8,Te)])])),_:1},8,["onClose"])):(0,a.createCommentVNode)("",!0)],64)}n(1788);var $e=n(8845),Ae=n(2327),Ie=n(285),Oe={name:"AppHeader",components:{Avatar:$e.Z,BootstrapModal:Ae.Z},data:()=>({userDropdown:!1,notification:!1,hasReadAll:!1,confirmed:!1,selectedBranch:null,selectedContent:"ALL",newDay:{from:new Date(TODAY).toLocaleString("fr-CA",{timeZone:TIMEZONE}).slice(0,10),to:new Date(TODAY).toLocaleString("fr-CA",{timeZone:TIMEZONE}).slice(0,10)}}),computed:{...(0,Ie.rn)({lockedBranch:e=>e.branch,branches:e=>e.branches}),notifications(){return this.loggedUser.alerts||[]},hasNotifications(){return this.notifications.some((e=>null==e.read_at))&&!this.hasReadAll}},created(){},methods:{setPrintingBranch(){window.localStorage.setItem("__printing_branch",this.selectedBranch),this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"Branch Set successfully"}),this.toggleModal(),setTimeout((()=>{location.reload()}),1e3)},createNewDay(){this.toggleModal(),this.$router.push({name:"EodCreator",query:{start_date:this.newDay.from,end_date:this.newDay.to}})},showNotifications(){this.notification=!this.notification,this.hasNotifications&&(this.$store.commit("SET_REQUEST_FLAG","READING_NOTIFICATIONS"),this.$http.get("auth/notifications/read").then((()=>{this.hasReadAll=!0})))},notificationIcon(e){var t;switch(e){case"StockTransfer":t="bg-success ni-building-fill";break;case"RequisitionUpdated":t="bg-primary-dim ni-reload";break;default:t="bg-primary ni ni-trend-up"}return t},signout(){this.$http.post("auth/logout",this.$helper.generateFormData({})).then((e=>{e.data.status&&this.$store.dispatch("logout").then((()=>{window.location.replace(this.$router.resolve({name:"Login"}).href)}))}))},setBranch(e){this.$store.commit("SET_LOCKED_BLANCH",e),location.reload()},getLatestEOD(){this.$store.commit("SET_REQUEST_FLAG","GET_LAST_EOD"),this.$http.get("settings/eod/latest").then((e=>{var t=new Date(e.data.yesterday);e.data.row&&(t=e.data.row.to_date),TODAY==t?this.$store.state.isCorrectSystemDay=!0:(this.newDay.from=new Date(t).toLocaleString("fr-CA",{timeZone:TIMEZONE}).slice(0,10),this.toggleModal())}))}},mounted(){}},Me=n(9646);const Pe=(0,Me.Z)(Oe,[["render",Le]]);var Re=Pe;const Fe={id:"mainnav-container",class:"mainnav"},ze={class:"mainnav__inner"},je={class:"mainnav__top-content scrollable-content pb-5"},Ze={class:"text-end"},Ue={class:"mainnav__categoriy py-1"},qe=(0,a.createElementVNode)("h6",{class:"mainnav__caption mt-0 px-3 fw-bold"},"Navigation",-1),He={class:"mainnav__menu nav flex-column"},Ge={class:"nav-label mininav-content ms-1 text-capitalize"},Ke=["onClick","id"],Qe={class:"nav-label mininav-content ms-1 text-capitalize"},Ye={class:"mininav-content nav collapse"},We={key:0,class:"nav-item"},Je={class:"nk-menu-text text-capitalize"},Xe={key:0,class:"nav-item"},et=(0,a.createElementVNode)("svg",{class:"fs-5 me-2",height:"15px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},[(0,a.createElementVNode)("path",{"fill-rule":"evenodd",d:"M12 1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"}),(0,a.createElementVNode)("path",{d:"M4 2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-2zm0 4a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-4z"})],-1),tt=(0,a.createElementVNode)("span",{class:"nav-label mininav-content ms-1 text-capitalize"},"Front Office",-1),nt=[et,tt],at={class:"mainnav__bottom-content border-top pb-2"},ot={id:"mainnav",class:"mainnav__menu nav flex-column"},rt={class:"nav-item"},lt=(0,a.createElementVNode)("i",{class:"demo-pli-unlock fs-5 me-2"},null,-1),st=(0,a.createElementVNode)("span",{class:"nav-label ms-1"},"Logout",-1),it=[lt,st],ct=(0,a.createElementVNode)("span",null,"Select Branch and Continue",-1),dt={class:"w-100"},mt={class:"form-group mb-3"},pt=(0,a.createElementVNode)("option",{value:"null",hidden:"",disabled:""},"Select Branch",-1),ut=["value"],ht={class:"form-group"},gt=["disabled"];function vt(e,t,n,o,r,l){const s=(0,a.resolveComponent)("digital-clock"),i=(0,a.resolveComponent)("router-link"),c=(0,a.resolveComponent)("loading-dots"),d=(0,a.resolveComponent)("bootstrap-modal");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("nav",Fe,[(0,a.createElementVNode)("div",ze,[(0,a.createElementVNode)("div",je,[(0,a.createElementVNode)("div",Ze,[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(["fw-bolder",{"text-danger":l.requiredEOD}])},(0,a.toDisplayString)(e.$helper.formatDate(e.today)),3)]),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["mainnav__profile mt-0 d-flex justify-content-end",{"text-danger":l.requiredEOD}])},[(0,a.createVNode)(s)],2),(0,a.createElementVNode)("div",Ue,[qe,(0,a.createElementVNode)("ul",He,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.menus,(t=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[e.$helper.empty(t.submenus)&&l.canAccess(t.title)?((0,a.openBlock)(),(0,a.createElementBlock)("li",{class:"nav-item",key:t.title},[(0,a.createVNode)(i,{to:t.url,class:(0,a.normalizeClass)(["nav-link mininav-toggle collapsed",{active:t.url.name==l.currentRoute}])},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("i",{class:(0,a.normalizeClass)(`${t.icon} fs-5 me-2`)},null,2),(0,a.createElementVNode)("span",Ge,(0,a.toDisplayString)(e.$helper.inputTitle(t.title)),1)])),_:2},1032,["to","class"])])):l.canAccess(t.title)?((0,a.openBlock)(),(0,a.createElementBlock)("li",{class:"nav-item has-sub",key:"menu_"+t.title},[(0,a.createElementVNode)("a",{onClick:(0,a.withModifiers)((e=>l.showSubMenus(t.title)),["prevent"]),href:"javascript:void(0)",id:t.title,class:(0,a.normalizeClass)(["nav-link mininav-toggle collapsed",{active:t.url.name==l.currentRoute}])},[(0,a.createElementVNode)("i",{class:(0,a.normalizeClass)(`${t.icon} fs-5 me-2`)},null,2),(0,a.createElementVNode)("span",Qe,(0,a.toDisplayString)(t.title),1)],10,Ke),(0,a.createElementVNode)("ul",Ye,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.submenus,((n,o)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:o},[l.canAccess(t.title,o)?((0,a.openBlock)(),(0,a.createElementBlock)("li",We,[(0,a.createVNode)(i,{to:n,class:"nav-link"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",Je,(0,a.toDisplayString)(e.$helper.inputTitle(o)),1)])),_:2},1032,["to"])])):(0,a.createCommentVNode)("",!0)],64)))),128))])])):(0,a.createCommentVNode)("",!0)],64)))),256)),l.canAccess("front_office")?((0,a.openBlock)(),(0,a.createElementBlock)("li",Xe,[(0,a.createElementVNode)("a",{href:"javascript:void(0)",class:"nav-link mininav-toggle collapsed",onClick:t[0]||(t[0]=(0,a.withModifiers)(((...e)=>l.getBranches&&l.getBranches(...e)),["prevent"])),target:"_blank"},nt)])):(0,a.createCommentVNode)("",!0)])])]),(0,a.createElementVNode)("div",at,[(0,a.createElementVNode)("ul",ot,[(0,a.createElementVNode)("li",rt,[(0,a.createElementVNode)("a",{class:"nav-link mininav-toggle collapsed",onClick:t[1]||(t[1]=(0,a.withModifiers)(((...t)=>e.handleLogout&&e.handleLogout(...t)),["prevent"])),href:"javascript:void(0)","aria-expanded":"false"},it)])])])])]),e.modalOpen?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,onClose:e.toggleModal,"modal-size":"modal-sm"},{head:(0,a.withCtx)((()=>[ct])),body:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",dt,[e.branches.length?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createElementVNode)("div",mt,[(0,a.withDirectives)((0,a.createElementVNode)("select",{class:"form-control-lg form-select","onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedBranch=t)},[pt,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.branches,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("option",{value:e.id,key:e.id},(0,a.toDisplayString)(e.name),9,ut)))),128))],512),[[a.vModelSelect,e.selectedBranch]])]),(0,a.createElementVNode)("div",ht,[(0,a.createElementVNode)("button",{type:"button",class:"btn btn-primary w-100 btn-lg",onClick:t[3]||(t[3]=(...e)=>l.handleContinue&&l.handleContinue(...e)),disabled:!e.selectedBranch}," Continue ",8,gt)])],64)):((0,a.openBlock)(),(0,a.createBlock)(c,{key:0}))])])),_:1},8,["onClose"])):(0,a.createCommentVNode)("",!0)],64)}const Et=e=>((0,a.pushScopeId)("data-v-fcf2f632"),e=e(),(0,a.popScopeId)(),e),ft={class:"LCD me-0"},bt={class:"hours"},Nt=Et((()=>(0,a.createElementVNode)("div",{class:"divider"},":",-1))),Vt={class:"minutes"},yt=Et((()=>(0,a.createElementVNode)("div",{class:"divider"},":",-1))),kt={class:"seconds"};function St(e,t,n,o,r,l){return(0,a.openBlock)(),(0,a.createElementBlock)("div",ft,[(0,a.createElementVNode)("div",bt,(0,a.toDisplayString)(e.hours),1),Nt,(0,a.createElementVNode)("div",Vt,(0,a.toDisplayString)(e.minutes),1),yt,(0,a.createElementVNode)("div",kt,(0,a.toDisplayString)(e.seconds),1)])}var _t={name:"DigitalClock",data:()=>({hours:0,minutes:0,seconds:0,date:TODAY}),mounted(){this.$nextTick((()=>setInterval((()=>this.setTime()),1e3)))},methods:{setTime(){const e=new Date;let t=e.getHours(),n=e.getMinutes(),a=e.getSeconds();t=t<=9?`${t}`.padStart(2,0):t,n=n<=9?`${n}`.padStart(2,0):n,a=a<=9?`${a}`.padStart(2,0):a,this.hours=t,this.minutes=n,this.seconds=a}}};const Bt=(0,Me.Z)(_t,[["render",St],["__scopeId","data-v-fcf2f632"]]);var wt=Bt,Ct=n(438),xt=n(637),Dt={name:"NavBar",components:{DigitalClock:wt,BootstrapModal:Ae.Z,LoadingDots:Ct.Z},data:()=>({menus:xt.I,selectedBranch:null,branches:[],today:TODAY}),computed:{currentRoute(){return this.$route.name},requiredEOD(){return!0===this.$store.state.isCorrectSystemDay},isReady(){return this.loggedUser&&Object.keys(this.loggedUser).length>0},permissions(){return this.isReady&&(this.loggedUser.role.pos_permissions||this.loggedUser.role.permissions)}},methods:{handleContinue(){const e=this.$store.state.branches,t=e.find((e=>e.id==this.selectedBranch));this.$store.commit("SET_LOCKED_BLANCH",t),setTimeout((()=>{const e=this.$router.resolve({name:"OrdersCreator",params:{action:"new"}}).href;return window.open(e,"_blank"),!1}),250)},getBranches(){const e=this.$store.state.branch;e&&Object.keys(e).length>0?(this.selectedBranch=e.id,this.$store.commit("SET_LOCKED_BLANCH",e),this.handleContinue()):(this.toggleModal(),this.branches.length||(this.$store.commit("SET_REQUEST_FLAG","GET_BRANCHES"),this.$http.get("branches/show").then((e=>{this.branches=e.data.branches}))))},canAccess(e,t=null){if("ADMINISTRATOR"!=this.userRole&&this.loggedUser.role_id){const n=this.permissions.back_office;return t?n[e][t]&&n[e][t].includes("R"):n[e]&&1==n[e].accessible}return!0},showSubMenus(e){const t=document.querySelector(`a#${e}`),n=t.parentElement;t.classList.toggle("collapsed");const a=n.querySelector("ul");[...document.querySelectorAll(".mininav-content.nav")].forEach((e=>{e!=a&&(e.classList.remove("show"),e.classList.add("collapsed"))})),a.classList.toggle("show"),a.classList.toggle("collapsed")}},mounted(){const e={};xt.I.forEach((t=>{if(t.submenus)for(let n in t.submenus)e[t.submenus[n].name]=`${t.title}.${n}`;else e[t.url.name]=t.title})),this.$store.state.routes=e}};const Tt=(0,Me.Z)(Dt,[["render",vt]]);var Lt=Tt,$t=n(9269);const At={id:"print-container"},It={class:"fs-5 text-center py-1 border-bottom border-dashed"},Ot={class:"site-log"},Mt=["src","alt"],Pt={class:"h5 mb-1"},Rt={class:"mb-0 h6"},Ft={class:"mb-0 h6"},zt={key:0},jt={class:"mb-0 h6"},Zt={class:"mb-0 h6"},Ut={key:0,class:"py-1 border-bottom border-dashed"},qt={class:"table table-sm table-borderless mb-1"},Ht={colspan:"2"},Gt={class:"mb-0 h6"},Kt={colspan:"2"},Qt={class:"mb-0 h6"},Yt={class:"mb-0 h6"},Wt={class:"text-end text-nowrap"},Jt={class:"mb-0 h6"},Xt={class:"mb-0 h6"},en={class:"text-end text-nowrap"},tn={class:"mb-0 h6"},nn={key:1,class:"py-1 border-bottom border-dashed"},an={class:"d-flex align-items-center flex-nowrap"},on={class:"text-foggy mb-0 h6"},rn={class:"fw-bold d-block"},ln={class:"fw-normal d-block text-foggy"},sn={class:"ms-auto fw-bolder text-dark h6 mb-0"},cn={key:0,class:"addons-container ps-1"},dn={class:"widget widget-categories"},mn={class:"has-children"},pn={class:"collapse show py-0"},un={href:"javascript:void(0)",class:"d-flex align-items-center fw-normal"},hn={key:1,class:"mb-1"},gn=(0,a.createElementVNode)("span",{class:"fw-bolder mb-2"},"Notes:",-1),vn={class:"mb-0"},En={class:"py-1 border-bottom border-dashed"},fn={class:"table table-sm table-borderless mb-0"},bn=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",{class:"fw-bolder"},"Grand Total")],-1),Nn={class:"text-end text-nowrap"},Vn={class:"h6 mb-0"};function yn(e,t,n,o,r,l){const s=(0,a.resolveDirective)("for-callback");return(0,a.openBlock)(),(0,a.createElementBlock)("div",At,[(0,a.createElementVNode)("div",It,[(0,a.createElementVNode)("div",Ot,[(0,a.createElementVNode)("img",{src:e.getSiteLogo(),style:{width:"150px"},alt:e.appSettings?.site_name},null,8,Mt)]),(0,a.createElementVNode)("p",Pt,[(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(e.appSettings.site_name),1)]),(0,a.createElementVNode)("p",Rt,"TIN: "+(0,a.toDisplayString)(e.appSettings.app_tin),1),(0,a.createElementVNode)("p",Ft,[(0,a.createTextVNode)(" Tel: "+(0,a.toDisplayString)(e.appSettings.app_phone),1),e.appSettings?.contact_one?((0,a.openBlock)(),(0,a.createElementBlock)("span",zt,"/"+(0,a.toDisplayString)(e.appSettings?.contact_one),1)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("p",jt,"Email:"+(0,a.toDisplayString)(e.appSettings?.app_email),1),(0,a.createElementVNode)("p",Zt,"Address: "+(0,a.toDisplayString)(e.appSettings?.site_address),1)]),e.$helper.empty(n.order)||e.$helper.empty(n.round)?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",Ut,[(0,a.createElementVNode)("table",qt,[(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",Ht,[(0,a.createElementVNode)("p",Gt,[(0,a.createTextVNode)(" Order NO: "),(0,a.createElementVNode)("b",null,"#"+(0,a.toDisplayString)(e.$helper.generateVoucherNo(n.round.round_no)),1),(0,a.createTextVNode)(" → "+(0,a.toDisplayString)(n.round.destination),1)])])]),(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",Kt,[(0,a.createElementVNode)("p",Qt,[(0,a.createTextVNode)(" Customer: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(n.order?.client?.name||"Walk-In"),1)])])]),(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("p",Yt,[(0,a.createTextVNode)(" Served By: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(n.order?.waiter?.last_name||n.order?.waiter?.name),1)])]),(0,a.createElementVNode)("td",Wt,[(0,a.createElementVNode)("p",Jt,[(0,a.createTextVNode)(" Table No: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(n.order?.table?.name),1)])])]),(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("p",Xt,[(0,a.createTextVNode)(" Date: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(e.$helper.formatDate(n.order.order_date)),1)])]),(0,a.createElementVNode)("td",en,[(0,a.createElementVNode)("p",tn,[(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(e.$helper.formatTime(n.order.order_date)),1)])])])])])),n.items.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",nn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.items,((t,o)=>(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"border-bottom mb-2",key:"order_items"+o},[(0,a.createElementVNode)("div",an,[(0,a.createElementVNode)("span",on,[(0,a.createElementVNode)("span",rn,(0,a.toDisplayString)(t.name),1),(0,a.createElementVNode)("span",ln,(0,a.toDisplayString)(t.quantity)+" x "+(0,a.toDisplayString)(e.$helper.formatNumber(t.price)),1)]),(0,a.createElementVNode)("span",sn,(0,a.toDisplayString)(e.$helper.formatNumber((t.price||t.cost)*t.quantity)),1)]),t.addons&&t.addons.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",cn,[(0,a.createElementVNode)("div",dn,[(0,a.createElementVNode)("ul",null,[(0,a.createElementVNode)("li",mn,[(0,a.createElementVNode)("ul",pn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.addons,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("li",{key:o+"addon"+t},[(0,a.createElementVNode)("a",un,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.name),1)])])))),128))])])])])])):(0,a.createCommentVNode)("",!0),t.comment?((0,a.openBlock)(),(0,a.createElementBlock)("div",hn,[gn,(0,a.createElementVNode)("p",vn,(0,a.toDisplayString)(t.comment),1)])):(0,a.createCommentVNode)("",!0)])),[[s,{key:o,array:n.items,callback:l.callback}]]))),128))])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",En,[(0,a.createElementVNode)("table",fn,[(0,a.createElementVNode)("tr",null,[bn,(0,a.createElementVNode)("td",Nn,[(0,a.createElementVNode)("span",Vn,(0,a.toDisplayString)(e.formatMoney(l.orderTotal)),1)])])])])])}var kn=n(8912),Sn={name:"OrderPreview",props:{order:{type:Object,required:!0},round:{type:Object,required:!0},items:{type:Array,required:!0}},computed:{orderTotal(){return this.items.reduce(((e,t)=>e+Number((t.price||t.cost)*t.quantity)),0)}},directives:{forCallback(e,t,n){let a=t.value;var o=a.key,r=0;if(Array.isArray(a.array))r=a.array.length;else if("object"===typeof a.array){var l=Object.keys(a.array);o=l.indexOf(o),r=l.length}o==r-1&&"function"===typeof a.callback&&a.callback.bind(n.context)()}},methods:{handlePrint(e){const t=new kn.gR,n=[`${location.origin}/pos/css/thermal-print.css`];t.print(document.querySelector(e),n)},callback(){this.handlePrint("#order-preview")}}};const _n=(0,Me.Z)(Sn,[["render",yn]]);var Bn=_n;const wn={class:"bill-container"},Cn={class:"fs-5 text-center py-1 border-bottom border-dashed"},xn={class:"site-log"},Dn=["src","alt"],Tn={class:"h5 mb-1"},Ln={class:"mb-0 h6"},$n={class:"mb-0 h6"},An={key:0},In={class:"mb-0 h6"},On={class:"mb-0 h6"},Mn={key:0,class:"py-1 border-bottom border-dashed"},Pn={class:"table table-sm table-borderless mb-1"},Rn={colspan:"2"},Fn={class:""},zn={colspan:"2"},jn={class:""},Zn={colspan:"2"},Un={class:""},qn={colspan:"2"},Hn={class:""},Gn={class:"text-end text-nowrap"},Kn={key:1,class:"py-1 border-bottom border-dashed"},Qn={class:"table table-sm table-borderless mb-1"},Yn={class:"text-end text-nowrap"},Wn={class:"py-1 border-bottom border-dashed"},Jn={class:"table table-sm table-borderless mb-0"},Xn=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",{class:"fw-bolder"},"Grand Total")],-1),ea={class:"text-end text-nowrap"},ta={class:"h6 mb-0"},na={class:"py-1 text-center"},aa={class:"table table-sm table-borderless mb-0"},oa={colspan:"2"},ra={key:0,class:"h5 mb-0"},la=(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",{colspan:"2"},[(0,a.createElementVNode)("div",{class:"text-center",style:{"font-size":"12px"}}," This is not a legal receipt. Please ask your legal receipt. ")])],-1),sa=(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",{colspan:"2"},[(0,a.createElementVNode)("span",{class:"h5 mb-0"},[(0,a.createElementVNode)("em",null,"Thank you!")])])],-1);function ia(e,t,n,o,r,l){const s=(0,a.resolveDirective)("for-callback");return(0,a.openBlock)(),(0,a.createElementBlock)("div",wn,[(0,a.createElementVNode)("div",Cn,[(0,a.createElementVNode)("div",xn,[(0,a.createElementVNode)("img",{src:e.getSiteLogo(),style:{width:"150px"},alt:e.appSettings?.site_name},null,8,Dn)]),(0,a.createElementVNode)("p",Tn,[(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(e.appSettings.site_name),1)]),(0,a.createElementVNode)("p",Ln,"TIN: "+(0,a.toDisplayString)(e.appSettings.app_tin),1),(0,a.createElementVNode)("p",$n,[(0,a.createTextVNode)(" Tel: "+(0,a.toDisplayString)(e.appSettings.app_phone)+" ",1),e.appSettings?.contact_one?((0,a.openBlock)(),(0,a.createElementBlock)("span",An,"/"+(0,a.toDisplayString)(e.appSettings?.contact_one),1)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("p",In,"Email:"+(0,a.toDisplayString)(e.appSettings?.app_email),1),(0,a.createElementVNode)("p",On,"Address: "+(0,a.toDisplayString)(e.appSettings?.site_address),1)]),e.$helper.empty(n.order)?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",Mn,[(0,a.createElementVNode)("table",Pn,[(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",Rn,[(0,a.createElementVNode)("span",Fn,[(0,a.createTextVNode)("INVOICE #: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(e.$helper.generateVoucherNo(n.order.id)),1)])])]),(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",zn,[(0,a.createElementVNode)("span",jn,[(0,a.createTextVNode)("Customer: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(n.order?.client?.name||"Walk-In"),1)])])]),(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",Zn,[(0,a.createElementVNode)("span",Un,[(0,a.createTextVNode)("Served By: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(n.order.waiter?n.order.waiter.name:"Administrator"),1)])])]),(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",qn,[(0,a.createElementVNode)("span",Hn,[(0,a.createTextVNode)("Table: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(n.order?.table?.name),1)])])]),(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",null,[(0,a.createTextVNode)("Date: "),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(e.$helper.formatDate(n.order.order_date)),1)])]),(0,a.createElementVNode)("td",Gn,[(0,a.createElementVNode)("span",null,[(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(e.$helper.formatTime(n.order.order_date)),1)])])])])])),n.items.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",Kn,[(0,a.createElementVNode)("table",Qn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.items,((t,o)=>(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:"invoice_items"+o},[(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(t.name),1)]),(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(t.quantity)+" x "+(0,a.toDisplayString)(e.$helper.formatNumber(t.price)),1)]),(0,a.createElementVNode)("td",Yn,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.$helper.formatNumber(t.amount)),1)])])),[[s,{key:o,array:n.items,callback:l.callback}]]))),128))])])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Wn,[(0,a.createElementVNode)("table",Jn,[(0,a.createElementVNode)("tr",null,[Xn,(0,a.createElementVNode)("td",ea,[(0,a.createElementVNode)("span",ta,(0,a.toDisplayString)(e.formatMoney(n.order.grand_total)),1)])])])]),(0,a.createElementVNode)("div",na,[(0,a.createElementVNode)("table",aa,[(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("td",oa,[e.appSettings?.momo_code?((0,a.openBlock)(),(0,a.createElementBlock)("span",ra,"Dial "+(0,a.toDisplayString)(e.appSettings?.momo_code)+" to pay with MOMO",1)):(0,a.createCommentVNode)("",!0)])]),la,sa])])])}var ca={name:"InvoicePreview",props:{order:{type:Object,required:!0},items:{type:Array,required:!0}},directives:{forCallback(e,t,n){let a=t.value;var o=a.key,r=0;if(Array.isArray(a.array))r=a.array.length;else if("object"===typeof a.array){var l=Object.keys(a.array);o=l.indexOf(o),r=l.length}o==r-1&&"function"===typeof a.callback&&a.callback.bind(n.context)()}},methods:{handlePrint(e){const t=new kn.gR,n=[`${location.origin}/pos/css/thermal-print.css`];t.print(document.querySelector(e),n)},callback(){this.handlePrint("#invoice-preview")}}};const da=(0,Me.Z)(ca,[["render",ia]]);var ma=da,pa=n(2642),ua=n(8068);const ha={},ga=(e,t)=>{if(!t)return e;ha[t]&&ha[t].cancel();const n=pa.$B.source(),a={...e,cancelToken:n.token};return ha[t]=n,a},va=()=>Math.random().toString(36).substr(2,8),Ea=({url:e,method:t="GET",headers:n})=>{const a=va(),o={url:e,method:t,headers:ga(n||{},a)};return ua["default"].request(o).then((e=>(delete ha[a],{data:e.data}))).catch((()=>{delete ha[a]}))};var fa=Ea,ba={components:{AppHeader:Re,NavBar:Lt,Loader:$t.Z,OrderPreview:Bn,InvoicePreview:ma,BootstrapModal:Ae.Z},data:()=>({printableRound:{},roundItems:[],printInterval:null,isFetchingRounds:!1,placedOrder:{},latestPrintedRoundId:null,printedInvoice:{},invoiceItems:[],selectedBranch:null,selectedContent:"ALL",printingBranch:null,branches:[],isFireFox:!1,printingToken:null,printingCode:null,invalidPrintingCode:!1,inputs:["","","","","",""]}),computed:{flashMessage(){return this.$store.state.flashMessage},appSettings(){return this.$store.state.settings},appReady(){return!this.$helper.empty(this.loggedUser)},globalAjaxRequest(){return this.$store.state.isLoading&&!Object.keys(this.$store.getters.pendingRequests).length},roundsUrl(){if(this.printingBranch&&this.printingContent&&this.printingToken){let e=this.latestPrintedRoundId?`next-printable-round?print_token=${this.printingToken}&latest=${this.latestPrintedRoundId}&branch_id=${this.printingBranch}`:`next-printable-round?print_token=${this.printingToken}&branch_id=${this.printingBranch}`;return"ALL"!==this.printingContent&&(e+=`&category=${this.printingContent}`),e}return null}},created(){this.isUserLoggedIn&&this.$http.get("auth/me").then((e=>{this.$store.commit("SET_CURRENT_USER",{...e.data.user})})),this.$http.all([this.$http.post("frontend/preloaders",this.$helper.generateFormData({keys:Object.keys(this.appSettings)})),this.$http.get("pos-branches")]).then(this.$http.spread(((e,t)=>{this.$store.commit("SET_APP_SETTINGS",e.data);const{branches:n}=t.data;if(n&&(this.$store.commit("SET_BRANCHES",n),this.branches=n,navigator.userAgent.indexOf("Firefox")>0||-1!==navigator.userAgent.toLowerCase().indexOf("firefox"))){const e=localStorage.getItem("__printing_branch"),t=localStorage.getItem("__printing_content");e&&t||this.toggleModal()}})))},methods:{handlePrintRefesh(){localStorage.removeItem("__printing_tab"),sessionStorage.removeItem("isPrinting"),setTimeout((()=>{location.reload()}),1e3)},setPrintingBranch(){localStorage.setItem("__printing_branch",this.selectedBranch),this.printingBranch=this.selectedBranch,"ALL"!==this.selectedContent&&(this.printingContent=this.selectedContent,localStorage.setItem("__printing_content",this.selectedContent)),this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"Branch Set successfully"}),this.toggleModal()},setPrintingCode(e,t){const n=t.keyCode||t.charCode;if(8!=n&&46!=n&&""!==this.$refs.inputRef[e]){const t=this.$refs.inputRef[e+1];t&&t.focus();const n=this.inputs.every((e=>""!==e));n&&(this.printingCode=this.inputs.join(""),this.authenticatePrinting())}},handlePaste(e){const t=e.clipboardData.getData("text/plain");if(t){const e=t.toString().split("").map(Number);for(let t=0;t<e.length;t++)this.inputs[t]=e[t];5===this.inputs.length&&(this.printingCode=t,this.authenticatePrinting())}},authenticatePrinting(){this.invalidPrintingCode=!1,this.$http.get(`auth/printing/${this.printingCode}`).then((e=>{const{branch_id:t,content:n,latest_print:a}=e.data;localStorage.setItem("__printing_branch",t),localStorage.setItem("__printing_content",n),a&&(this.latestPrintedRoundId=a,localStorage.setItem("__last_printed_round",a)),this.printingBranch=t,this.printingContent=n,this.printingCode=null,this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"Settings Loaded successfully"}),this.toggleModal()})).catch((e=>{422==e.response.status&&(this.invalidPrintingCode=!0,this.$store.commit("SET_FLASH_MESSAGE",{type:"danger",message:"Printing Code doesn't exist. Try Again"}))}))}},mounted(){this.$nextTick((()=>{if(navigator.userAgent.indexOf("Firefox")>0||-1!==navigator.userAgent.toLowerCase().indexOf("firefox")){this.isFireFox=!0;let e=localStorage.getItem("__printing_token");e||(e=Math.random().toString(36).slice(2),localStorage.setItem("__printing_token",e)),this.printingToken=e;const t=localStorage.getItem("__last_printed_round");t&&(this.latestPrintedRoundId=t),setTimeout((()=>{const e=localStorage.getItem("__printing_tab");if(!e){localStorage.setItem("__printing_tab",Math.random().toString(36).slice(2)),sessionStorage.setItem("isPrinting",!0);const e=localStorage.getItem("__printing_branch");e&&(this.printingBranch=e);const t=localStorage.getItem("__printing_content");t&&(this.printingContent=t),this.printInterval=setInterval((()=>{!this.isFetchingRounds&&this.printingBranch&&(this.isFetchingRounds=!0,this.$store.commit("SET_REQUEST_FLAG","GETTING_LOCKED_TABLES"),fa({url:this.roundsUrl}).then((e=>{if(this.isFetchingRounds=!1,e.data.status){const t=e.data.round,n=e.data.items,a=e.data.order;"ORDER"==t.category?(this.printableRound=t,this.roundItems=n,this.placedOrder=a):(Array.isArray(t?.items)&&t?.items?.length>0&&(a.grand_total=t?.items.reduce(((e,t)=>e+Number(t.amount)),0)),this.printedInvoice=a,this.invoiceItems=n),this.latestPrintedRoundId=t.id,localStorage.setItem("__last_printed_round",this.latestPrintedRoundId)}})))}),6e3)}}),2e3)}}))},watch:{$route(e){["Orders"].includes(e.name)?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")}}};const Na=(0,Me.Z)(ba,[["render",P],["__scopeId","data-v-52498e24"]]);var Va=Na,ya=(n(8314),n(3478)),ka=n(7934),Sa=n(5047),_a=n(2950),Ba=n(2493),wa=n(6320),Ca=n(9090),xa=n(1540);const Da=(0,a.createApp)(Va);ua["default"].withCredentials=!0,ua["default"].interceptors.request.use((e=>{const t=localStorage.getItem("_branch");return t&&(e.url=(0,xa.aF)(e.url,{current_branch:JSON.parse(t).id})),ka.Z.state.isLoading=!0,ka.Z.getters.requestFlag&&(ka.Z.state.pendingRequests[ka.Z.getters.requestFlag]=e.url,ka.Z.state.requestFlag=null),e}),(e=>(ka.Z.commit("REQUEST_RESOLVED",e.config.url),Promise.reject(e)))),ua["default"].interceptors.response.use((e=>(ka.Z.commit("REQUEST_RESOLVED",e.config.url),e)),(e=>(ka.Z.commit("REQUEST_RESOLVED",e.config.url),401===e.response.status&&"/"!=location.pathname&&"/pos/"!=location.pathname&&(localStorage.removeItem("token"),location.replace(ya.Z.resolve({name:"Login"}).href)),500==e.response.status&&ka.Z.commit("SET_FLASH_MESSAGE",{type:"danger",message:"Error Occured. Please contact system administrator"}),Promise.reject(e)))),Da.config.globalProperties.$http=ua["default"],Da.config.globalProperties.$http.defaults.baseURL="/api/pos/";const Ta=localStorage.getItem("token");Ta&&(Da.config.globalProperties.$http.defaults.headers.common["Authorization"]="Bearer "+Ta),Da.component("wolf-button",Ba.Z),Da.mixin(Sa.h),Da.use(wa.Z,ka.Z).use(Ca.Z,ka.Z).use(_a.Z).use(ka.Z).use(ya.Z).mount("#app")},637:function(e,t,n){n.d(t,{I:function(){return a}});const a=[{title:"dashboard",icon:"demo-pli-home",url:{name:"Dashboard"},notifications:[]},{title:"orders",icon:"demo-pli-tag-3",url:{name:"Orders"},notifications:[]},{title:"menu_items",icon:"demo-pli-mine",url:{name:"Items"},notifications:[]},{title:"tables",icon:"demo-pli-receipt-4",url:{name:"Tables"},notifications:[]},{title:"branches",icon:"demo-pli-map-marker",url:{name:"Branches"},notifications:[]},{title:"reports",icon:"demo-pli-information",url:{name:"ReportsIndex"},notifications:[]},{title:"lead",icon:"demo-pli-male-2",url:{name:""},notifications:[],submenus:{users:{name:"Users"},clients:{name:"Clients"}}},{title:"settings",icon:"demo-pli-gear",url:{name:""},notifications:[],submenus:{general:{name:"GeneralSettings"},user_roles:{name:"UserRoles"},items_types:{name:"ItemsType"},items_units:{name:""}}}]}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],r=e[d][2];for(var s=!0,i=0;i<a.length;i++)(!1&r||l>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(s=!1,r<l&&(l=r));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/mainChuck.e92b27af.js"}}(),function(){n.miniCssF=function(e){return"css/mainChuck.b8e34869.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="tame-pos:";n.l=function(a,o,r,l){if(e[a])e[a].push(o);else{var s,i;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var m=c[d];if(m.getAttribute("src")==a||m.getAttribute("data-webpack")==t+r){s=m;break}}s||(i=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+r),s.src=a),e[a]=[o];var p=function(t,n){s.onerror=s.onload=null,clearTimeout(u);var o=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(n)})),t)return t(n)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),i&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/pos/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,a,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var l=function(n){if(r.onerror=r.onload=null,"load"===n.type)a();else{var l=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.type=l,i.request=s,r.parentNode&&r.parentNode.removeChild(r),o(i)}};return r.onerror=r.onload=l,r.href=t,n?n.parentNode.insertBefore(r,n.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var o=n[a],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var l=document.getElementsByTagName("style");for(a=0;a<l.length;a++){o=l[a],r=o.getAttribute("data-href");if(r===e||r===t)return o}},a=function(a){return new Promise((function(o,r){var l=n.miniCssF(a),s=n.p+l;if(t(l,s))return o();e(a,s,null,o,r)}))},o={826:0};n.f.miniCss=function(e,t){var n={263:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=a(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={826:0};n.f.j=function(t,a){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise((function(n,a){o=e[t]=[n,a]}));a.push(o[2]=r);var l=n.p+n.u(t),s=new Error,i=function(a){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+l+")",s.name="ChunkLoadError",s.type=r,s.request=l,o[1](s)}};n.l(l,i,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,l=a[0],s=a[1],i=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(i)var d=i(n)}for(t&&t(a);c<l.length;c++)r=l[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},a=self["webpackChunktame_pos"]=self["webpackChunktame_pos"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998,64],(function(){return n(6287)}));a=n.O(a)})();
//# sourceMappingURL=index.4385acd3.js.map