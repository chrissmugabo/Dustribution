"use strict";(self["webpackChunktame_pos"]=self["webpackChunktame_pos"]||[]).push([[64],{625:function(e,t){t["Z"]={install(e,t={}){e.config.globalProperties.$alert=e=>{var n=document.createElement("div");n.setAttribute("id","alert-container");const r=` <div\n        class="modal fade show"\n        id="modal-default"\n        tabindex="-1"\n        role="dialog"\n        style="display: block"\n      >\n        <div\n          class="modal-dialog modal- modal-dialog-centered modal-sm"\n          role="document"\n        >\n          <div class="modal-content" style="border-color: transparent">\n            <div class="modal-header py-2">\n              <h5 class="modal-title">\n                ${e.title}\n              </h5>\n              <a\n                href="javascript:void(0)"\n                class="close text-dark"\n              >\n                <em class="icon demo-pli-cross"></em\n              ></a>\n            </div>\n  \n            <div class="modal-body text-left h6 mb-0">\n                ${e.content}\n            </div>\n            <div class="modal-footer">\n              <button\n                type="button"\n                class="mr-auto ${e.classes}"\n                id="action-btn"\n              >\n                <span id="action-text">${e.actionText}</span>\n                <p id="alert-loading"><span></span><span></span><span></span></p>\n              </button>\n              <button\n                type="button"\n                class="btn btn-light ms-auto"\n                id="close-btn"\n              >\n              <span>${e.closeText}</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="modal-backdrop fade show"></div>`;n.innerHTML=r,n.querySelector(".close").addEventListener("click",(()=>{document.querySelector("#alert-container").remove(),t.store.state.hasActiveModal=!1})),n.querySelector("#close-btn").addEventListener("click",(()=>{document.querySelector("#alert-container").remove(),t.store.state.hasActiveModal=!1})),n.querySelector("#action-btn").addEventListener("click",(()=>{t.store.state.hasActiveModal=!0,t.store.state.requestFlag="HANDLING_ALERT_ACTION",n.querySelector("#action-text").remove(),n.querySelector("#alert-loading").classList.add("d-block"),e.action()})),document.body.prepend(n)}}}},2650:function(e,t,n){n.d(t,{h:function(){return r}});const r={data:()=>({uploadsUrl:"/api/uploads",modalOpen:!1,filterKey:null,publicPath:"/",permissionsPath:null,paymentMethods:["Cash","Momo","Cheque","Cards"]}),computed:{isUserLoggedIn:function(){return this.$store.getters.isLoggedIn},userPermissions(){if(this.$store.getters.user){let e=this.$store.getters.user.role;if(e)return e.permissions}return{}},appSettings(){let e=this.$store.state.settings||{};return e.result||{}},loggedUser(){return this.$store.getters.user||{}},userRole(){return this.loggedUser.role?this.loggedUser.role.name:null},currentBranch(){return this.$store.getters.branch}},methods:{handleLogout(){this.$store.dispatch("postRequest",{url:"auth/logout",formData:this.$helper.generateFormData({})}).then((e=>{e.data.status&&this.$store.dispatch("logout").then((()=>{window.location.replace("/")}))}))},toggleModal(){this.$helper.toggleModalOpen(),this.modalOpen=!this.modalOpen},handleEntityImageModify(e={}){this.$store.dispatch("SetEntityPostData",e).then((()=>{document.getElementById("global-upload").click()}))},canView(e){const t=this.$helper.getKeyValue(e,this.userPermissions)||"0000";return"ADMINISTRATOR"==this.userRole||1==t[0]},canCreate(e){const t=this.$helper.getKeyValue(e,this.userPermissions)||"0000";return"ADMINISTRATOR"==this.userRole||1==t[1]},canEdit(e){const t=this.$helper.getKeyValue(e,this.userPermissions)||"0000";return"ADMINISTRATOR"==this.userRole||1==t[2]},canDelete(e){const t=this.$helper.getKeyValue(e,this.userPermissions)||"0000";return"ADMINISTRATOR"==this.userRole||1==t[3]},formatMoney(e){return`${this.appSettings.currency} ${this.$helper.formatNumber(e)}`}}}},2745:function(e,t){t["Z"]={install(e){e.config.globalProperties.$helper={timeZone:localStorage.getItem("_tz")||"Africa/Kigali",baseUrl(e=null){let t=location.origin;return e&&(t+=`/${e}`),t},formatNumber(e){return e&&e.toString().indexOf(".")>-1&&(e=Number(e).toFixed(3)),Number(e)?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0},reloadPage(){location.reload()},showFilePicker(e){document.getElementById(e).click()},isEmpty(e){const t=Object.values(e).every((e=>null===e));return 0===Object.keys(e).length||!0===t},empty(e){let t,n,r,a;const o=[t,null,!1,0,"","0"];for(r=0,a=o.length;r<a;r++)if(e===o[r])return!0;if("object"===typeof e){for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}return!1},handleArrayPush(e,t){return[t,...e]},handlePrint(){window.print()},resetObjectValues(e){for(let t in e)if(!0===e[t])e[t]=!1;else{if(!1===e[t])continue;e[t]=null}return e},formatDate(e){let t={month:"short",day:"numeric",year:"numeric",timeZone:this.timeZone},n=new Date(e);return n.toLocaleDateString("en-US",t)},formatTime(e){return new Date(e).toLocaleTimeString("en-US",{timeZone:this.timeZone})},formatOrderTime(e){return new Date(e).toTimeString("en-US",{timeZone:this.timeZone}).slice(0,5)},generateFormData(e){let t=new FormData;for(let n in e)null!==e[n]&&("object"===typeof e[n]?t.append(n,JSON.stringify(e[n])):t.append(n,e[n]));return t},toggleModalOpen(){const e=document.documentElement;e.classList.contains("modal-open")?e.classList.remove("modal-open"):e.classList.add("modal-open");const t=document.body;t.classList.contains("modal-open")?t.classList.remove("modal-open"):t.classList.add("modal-open")},encodeQuery(e,t){let n="";for(let r in t)!this.empty(t[r])&&e.indexOf(`?${r}`)<0&&e.indexOf(`&${r}`)<0&&(n+=encodeURIComponent(r)+"="+encodeURIComponent(t[r])+"&");return e.indexOf("?")>-1?`${e}&${n.slice(0,-1)}`:`${e}?${n.slice(0,-1)}`},generateVoucherNo(e){let t=e.toString().length;return t>=4?e:1==t?`000${e}`:2==t?`00${e}`:3==t?`0${e}`:void 0},capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},inputTitle(e){return e.split("_").join(" ")},createTitleSlug(e){return e.toLowerCase().split(" ").join("_")},createKeyPath(e=[]){return e.join(".")},getKeyValue(e,t){return e.split(".").reduce(((e,t)=>e&&e[t]||null),t)},timeDifference(e,t=new Date(TODAY)){var n,r,a=6e4,o=60*a,s=24*o,i=30*s,l=365*s,c=e-t;c>0?c<a?(n=Math.round(c/1e3),r="second"):c<o?(n=Math.round(c/a),r="minute"):c<s?(n=Math.round(c/o),r="hour"):c<i?(n=Math.round(c/s),r="day"):c<l?(n=Math.round(c/i),r="month"):(n=Math.round(c/l),r="year"):c>-1*a?(n=Math.round(c/1e3),r="second"):c>-1*o?(n=Math.round(c/a),r="minute"):c>-1*s?(n=Math.round(c/o),r="hour"):c>-1*i?(n=Math.round(c/s),r="day"):c>-1*l?(n=Math.round(c/i),r="month"):(n=Math.round(c/l),r="year");const d=new Intl.RelativeTimeFormat;return d.format(n,r)},getRandomElement(e){return e[Math.floor(Math.random()*e.length)]},randomDate(e,t){return new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime()))},formatOrderDate(e){var t=this.timeDifference(new Date(e));let n=this.formatDate(e),r=this.formatDate(new Date(TODAY));return n==r?"today":t.indexOf("yesterday")>-1||t.indexOf("hour")>-1?"yesterday":this.formatDate(e)}}}}},3088:function(e,t){t["Z"]={install(e){e.config.globalProperties.$notifier=e=>{var t="icon ni ni-info-fill";e.icon&&(t=e.icon);const n=`<div id="toast-container" class="toast-top-right">\n      <div class="toastr toast-${e.type}" aria-live="polite" style="">\n        <span class="btn-trigger toast-close-button" role="button">Close</span>\n        <div class="toast-message">\n          <span class="toastr-icon"><em class="${t}"></em></span>\n          <div class="toastr-text">\n            ${e.message}\n          </div>\n        </div>\n      </div>\n    </div>`;var r=document.createElement("div");r.innerHTML=n,document.body.prepend(r),setTimeout((()=>{r.remove()}),4e3)}}}},2895:function(e,t,n){var r=n(5431);(0,r.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}})},8403:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(2483);const a=[{path:"/front-office",name:"FrontOfficeLogin",component:()=>n.e(263).then(n.bind(n,9625)),meta:{title:"Login"}},{path:"/front-office/orders",name:"WaiterOrders",component:()=>n.e(263).then(n.bind(n,5186)),meta:{title:"Waiter Orders",requireFrontOfficeAuth:!0}},{path:"/front-office/orders/:action/:reference?",name:"OrdersCreator",component:()=>n.e(263).then(n.bind(n,7741)),meta:{title:"Order Creator",requireFrontOfficeAuth:!0}},{path:"/front-office/kitchen/orders",name:"KitchenOrders",component:()=>n.e(263).then(n.bind(n,6564)),meta:{title:"Kitchen Orders",requireFrontOfficeAuth:!0}},{path:"/front-office/bar/orders",name:"BarOrders",component:()=>n.e(263).then(n.bind(n,6564)),meta:{title:"Bar Orders",requireFrontOfficeAuth:!0}}],o=[{path:"/dashboard",name:"Dashboard",component:()=>n.e(263).then(n.bind(n,5011)),meta:{title:"Dashboard",requiresAdminAuth:!0}},{path:"/items",name:"Items",component:()=>n.e(263).then(n.bind(n,9149)),meta:{title:"Food Items",requiresAdminAuth:!0}},{path:"/items/:action/:reference?",name:"CreateOrEditItem",component:()=>n.e(263).then(n.bind(n,2479)),meta:{title:"Create Menu Item",requiresAdminAuth:!0}},{path:"/branches",name:"Branches",component:()=>n.e(263).then(n.bind(n,7850)),meta:{title:"All Branches",requiresAdminAuth:!0}},{path:"/settings/Tables",name:"Tables",component:()=>n.e(263).then(n.bind(n,7257)),meta:{title:"Tables Settings",requiresAdminAuth:!0}},{path:"/orders",name:"Orders",component:()=>n.e(263).then(n.bind(n,6721)),meta:{title:"Orders Listing",requiresAdminAuth:!0}},{path:"/lead/users",name:"Users",component:()=>n.e(263).then(n.bind(n,6325)),meta:{title:"All Users",requiresAdminAuth:!0}},{path:"/lead/clients",name:"Clients",component:()=>n.e(263).then(n.bind(n,3914)),meta:{title:"All Clients",requiresAdminAuth:!0}},{path:"/sales",name:"Sales",component:()=>n.e(263).then(n.bind(n,9992)),meta:{title:"Sales Listing",requiresAdminAuth:!0}}];var s=n(3788);const i=[{path:"/:pathMatch(.*)*",name:"error404",component:()=>n.e(263).then(n.bind(n,6100)),meta:{title:"Page Not Found"}},{path:"/",name:"login",component:()=>n.e(263).then(n.bind(n,8756)),meta:{title:"Login"}}],l=(0,r.p7)({history:(0,r.PO)("/"),routes:[...i,...a,...o],scrollBehavior(){return{x:0,y:0}}});l.beforeEach(((e,t,n)=>{if(e.matched.some((e=>e.meta.requiresAdminAuth))){if(s.Z.getters.isLoggedIn)return void n();window.location.replace("/")}else if(e.matched.some((e=>e.meta.requireFrontOfficeAuth))){if(s.Z.getters.isLoggedIn)return void n();window.location.replace("/front-office/")}else n()}));const c="TAME POS";l.afterEach((e=>{document.title=e.meta.title+" | "+c||c,s.Z.state.drawerOpen&&(s.Z.state.drawerOpen=!1),[...document.querySelectorAll("div.dropdown-menu")].forEach((e=>{e.classList.remove("show")}))}));var d=l},3788:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(7139);const a=(e,t)=>{let n="";for(let r in t)t[r]&&e.indexOf(`?${r}`)<0&&e.indexOf(`&${r}`)<0&&(n+=encodeURIComponent(r)+"="+encodeURIComponent(t[r])+"&");return e.indexOf("?")>-1?`${e}&${n.slice(0,-1)}`:`${e}?${n.slice(0,-1)}`};var o=n(70);o.ZP.withCredentials=!0;const s="/api/pos/";o.ZP.defaults.baseURL=s;var i=(0,r.MT)({state:{status:"",timeZone:localStorage.getItem("_tz")||"Africa/Kigali",today:localStorage.getItem("today")||(new Date).toLocaleString("fr-CA",{timeZone:"Africa/Kigali"}).slice(0,10),token:localStorage.getItem("token")||"",branch:JSON.parse(localStorage.getItem("_branch"))||{},user:{},isLoading:!1,requestFlag:null,isCorrectSystemDay:!1,drawerOpen:!0,entityImagePost:{record_id:null,url:null},deleteAlert:{title:null,content:null,actionType:null,actionButton:null,classes:null,modalOpen:!1},recordDeleter:{entityName:null,url:null,media:{recordImage:null,galleryTable:null,mediaPath:null,galleryParentRef:null}},currentContent:{},responseData:{},hasActiveModal:!1,flashMessage:{},branches:[],settings:{site_address:null,site_name:null,currency:null,contact_one:null,app_phone:null,app_email:null,app_tin:null},notifications:{requisitions:0,purchase_orders:0,suppliers_payments:0,pending_orders:0}},mutations:{SET_APP_SETTINGS(e,t){e.settings=t,localStorage.setItem("_tz",t.timezone),localStorage.setItem("today",t.today)},SET_LOCKED_BLANCH(e,t){null!=t?localStorage.setItem("_branch",JSON.stringify(t)):localStorage.removeItem("_branch"),e.branch=t},SET_REQUEST_FLAG(e,t){e.requestFlag=t},SET_FLASH_MESSAGE(e,t){e.flashMessage=t,setTimeout((()=>{e.flashMessage={}}),5e3)},AUTH_REQUEST(e){e.status="loading"},AUTH_SUCCESS(e,t){e.status="success",e.token=t.token,e.user=t.user,e.requestFlag=null},REQUEST_SUCCESS(e){e.requestFlag=null,e.hasActiveModal&&(e.hasActiveModal=!1,document.querySelector("#alert-container").remove())},REQUEST_ERROR(e){e.status="error",e.requestFlag=null,e.hasActiveModal&&(e.hasActiveModal=!1,document.querySelector("#alert-container").remove())},logout(e){e.status="",e.token=""},SET_POST_DATA(e,t){e.entityImagePost={record_id:t.record_id,url:t.url}},SET_CURRENT_USER(e,t){e.user=t},SET_DB_RESPONSE(e,t){t&&(e.responseData={...e.responseData,...t})},SET_BRANCHES(e,t){e.branches=t},SET_MENU_NOTIFICATIONS(e,t){e.notifications={...e.notifications,...t}},REDUCE_NOTIFICATIONS(e,t){e.notifications[t.key]-=t.total||1}},actions:{SetEntityPostData({commit:e},t){return new Promise((n=>{e("SET_POST_DATA",t),n()}))},authRequest({commit:e},t){return new Promise(((n,r)=>{e("AUTH_REQUEST"),(0,o.ZP)({url:t.url,data:t.formData,method:"POST"}).then((t=>{const r=t.data.access_token||t.data.token;r&&(localStorage.setItem("token",r),o.ZP.defaults.headers.common.Authorization=r,e("AUTH_SUCCESS",{token:r,user:t.data.user})),n(t)})).catch((t=>{e("REQUEST_ERROR"),localStorage.removeItem("token"),r(t)}))}))},logout({commit:e}){return new Promise((t=>{e("logout"),localStorage.removeItem("_branch"),localStorage.removeItem("token"),delete o.ZP.defaults.headers.common.Authorization,localStorage.clear(),t()}))},postRequest({commit:e},t){return new Promise(((n,r)=>{const s=localStorage.getItem("_branch");let i=t.url;s&&(i=a(i,{current_branch:JSON.parse(s).id})),o.ZP.post(i,t.formData).then((t=>{e("REQUEST_SUCCESS"),e("SET_DB_RESPONSE",t.data),n(t)})).catch((t=>{401==t.response.status&&this.dispatch("logout").then((()=>{window.location.replace("/")})),500==t.response.status&&e("SET_FLASH_MESSAGE",{type:"danger",message:"Error Occured. Please contact system administrator"}),e("REQUEST_ERROR"),r(t)}))}))},getRequest({commit:e},t){return new Promise(((n,r)=>{const s=localStorage.getItem("_branch");s&&(t=a(t,{current_branch:JSON.parse(s).id})),o.ZP.get(t).then((t=>{e("REQUEST_SUCCESS"),e("SET_DB_RESPONSE",t.data),n(t)})).catch((t=>{401==t.response.status&&this.dispatch("logout").then((()=>{window.location.replace("/")})),500==t.response.status&&e("SET_FLASH_MESSAGE",{type:"danger",message:"Error Occured. Please contact system administrator"}),e("REQUEST_ERROR"),r(t)}))}))}},getters:{isLoggedIn:e=>!!e.token,authStatus:e=>e.status,user:e=>e.user,branch:e=>e.branch,requestFlag:e=>e.requestFlag}})},9990:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(9199);function a(e,t,n,a,o,s){return(0,r.wg)(),(0,r.iD)("div",{class:"user-avatar",style:(0,r.j5)(`background:${e.colours[s.getIndex(n.name)]};width:${n.width};height:${n.height}`)},[(0,r._)("span",{style:(0,r.j5)(""+(n.isLarge?"font-size: 2rem":""))},(0,r.zw)(s.getInitials(n.name)),5)],4)}var o={name:"Avatar",props:{name:{type:String,required:!0},width:{type:String,default:"40px"},height:{type:String,default:"40px"},isLarge:{type:Boolean,default:!1}},data:()=>({colours:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"]}),methods:{getInitials(e,t=2){var n=e.charAt(0).toUpperCase();if(e.indexOf(" ")>-1&&t>1){var r=e.split(" ");n=r[0].charAt(0).toUpperCase()+r[1].charAt(0).toUpperCase()}return n},getIndex(e){var t=0;if(e.indexOf(" ")>-1){var n=e.split(" ");t=n[0].toUpperCase().charCodeAt(0)+n[1].toUpperCase().charCodeAt(n[1].length-1)}else t=e.toUpperCase().charCodeAt(0)+e.toUpperCase().charCodeAt(e.length-1);return t%=19,t}}},s=n(89);const i=(0,s.Z)(o,[["render",a],["__scopeId","data-v-ff9824dc"]]);var l=i},1486:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(9199);const a={id:"temu-loader"},o=(0,r.uE)('<div class="preloader" data-v-55d01dcc><div class="preloader-inner" data-v-55d01dcc><div class="loading text-center" data-v-55d01dcc><div class="load-circle1" data-v-55d01dcc></div><div class="load-circle2" data-v-55d01dcc></div><div class="load-circle3" data-v-55d01dcc></div><div class="load-circle4" data-v-55d01dcc></div><div class="load-circle5" data-v-55d01dcc></div></div></div></div>',1),s=[o];function i(e,t,n,o,i,l){return(0,r.wg)(),(0,r.iD)("div",a,s)}var l={name:"Loader"},c=n(89);const d=(0,c.Z)(l,[["render",i],["__scopeId","data-v-55d01dcc"]]);var u=d},5261:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(9199);const a=e=>((0,r.dD)("data-v-2733554c"),e=e(),(0,r.Cn)(),e),o=["disabled"],s={key:0,id:"loading"},i=a((()=>(0,r._)("span",null,null,-1))),l=a((()=>(0,r._)("span",null,null,-1))),c=a((()=>(0,r._)("span",null,null,-1))),d=[i,l,c];function u(e,t,n,a,i,l){return(0,r.wg)(),(0,r.iD)("button",{onClick:t[0]||(t[0]=(...e)=>l.handleClick&&l.handleClick(...e)),disabled:l.isRequesting||n.disabler},[l.isRequesting?((0,r.wg)(),(0,r.iD)("p",s,d)):(0,r.WI)(e.$slots,"default",{key:1},void 0,!0)],8,o)}var m=n(7139),h={name:"WolfButton",props:{activator:{type:String,required:!0},disabler:{type:Boolean,default:!1}},computed:{...(0,m.rn)({requestFlag:e=>e.requestFlag,isLoading:e=>e.isLoading}),isRequesting(){return this.isLoading&&this.requestFlag===this.activator}},methods:{handleClick(){this.$store.commit("SET_REQUEST_FLAG",this.activator),this.$emit("clicked")}}},p=n(89);const g=(0,p.Z)(h,[["render",u],["__scopeId","data-v-2733554c"]]);var f=g}}]);
//# sourceMappingURL=chunk-common.6e499143.js.map