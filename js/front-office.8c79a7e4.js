(function(){"use strict";var e={6127:function(e,t,o){o.d(t,{k:function(){return a}});var r=o(1540);const a={computed:{loggedUser(){return this.$store.state.user||{}},isReady(){return this.loggedUser&&Object.keys(this.loggedUser).length>0},permissions(){return this.isReady&&(this.loggedUser.role.pos_permissions||this.loggedUser.role.permissions)},routePathString(){return this.$store.state.routes[this.$route.name]||""},isCashier(){if("ADMINISTRATOR"==this.userRole||!this.loggedUser.role_id)return!0;const e=this.permissions&&this.permissions.front_office;if(e){const t=e.waiter_orders.access.others;return r.mG.every((e=>!0===t[e]))}return!1},isCashierOnly(){const e=this.permissions&&this.permissions.front_office;if(e){const t=e.waiter_orders.access.others;return r.mG.every((e=>!0===t[e]))}return!1},canChangePrice(){if("ADMINISTRATOR"==this.userRole||!this.loggedUser.role_id)return!0;const e=this.permissions&&this.permissions.front_office;if(e){const t=e.place_orders.access.others;return r.tH.every((e=>!0===t[e]))}return!1}},methods:{isWaiter(e){const t=e?.role?.permissions?.front_office;return!!t&&(t.place_orders.accessible&&t.waiter_orders.accessible)},hasPermissionTo(e,t=null){if(!this.loggedUser.role_id||8==this.loggedUser.role_id)return!0;const o=-1!=location.pathname.indexOf("/front-office/")?"front_office":"back_office";if("front_office"==o){const t=this.routePathString.split(".").reduce(((e,t)=>e&&e[t]||null),this.permissions[o]),r=t?.access?.priviledges;return r&&r.includes(e)}{const r=this.permissions[o];let a={};a=t?t.split(".").reduce(((e,t)=>e&&e[t]||null),r):this.routePathString.split(".").reduce(((e,t)=>e&&e[t]||null),r);const l=a?.access||a;return l&&l.includes(e)}}}}},1904:function(e,t,o){var r=o(1005);const a={key:0,id:"ember201",class:"notification-message text-center zf-notification-container ember-view",style:{transform:"translateY(0px)",opacity:"1",transition:"transform 0.6s ease 0s"}},l={align:"center"},n={key:0,class:"svg-icon",viewBox:"0 0 17 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},s=(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 5zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"},null,-1),i=[s],c={key:1,class:"svg-icon",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},d=(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"},null,-1),m=[d],p={key:2,class:"svg-icon",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},u=(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1),h=[u],g={key:3,class:"svg-icon",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},v=(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M11.46.146A.5.5 0 0 0 11.107 0H4.893a.5.5 0 0 0-.353.146L.146 4.54A.5.5 0 0 0 0 4.893v6.214a.5.5 0 0 0 .146.353l4.394 4.394a.5.5 0 0 0 .353.146h6.214a.5.5 0 0 0 .353-.146l4.394-4.394a.5.5 0 0 0 .146-.353V4.893a.5.5 0 0 0-.146-.353L11.46.146zm-6.106 4.5a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"},null,-1),f=[v],E={class:"msg"},V=(0,r.createElementVNode)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",viewBox:"0 0 512 512","xml:space":"preserve",class:"icon-remove"},[(0,r.createElementVNode)("path",{d:"M455.2 9.2L256 208.4 56.8 9.2C44.5-3.1 24.6-3.1 12.2 9.2l-2.9 2.9C-3 24.4-3 44.4 9.3 56.7L208.4 256 9.2 455.2c-12.3 12.3-12.3 32.3 0 44.6l2.9 2.9c12.3 12.3 32.3 12.3 44.6 0L256 303.6l199.2 199.2c12.3 12.3 32.3 12.3 44.6 0l2.9-2.9c12.3-12.3 12.3-32.3 0-44.6L303.6 256 502.8 56.8c12.3-12.3 12.3-32.3 0-44.6l-2.9-2.9c-12.5-12.4-32.4-12.4-44.7-.1z"})],-1),N=[V],y={key:0,id:"root",class:"root hd--expanded mn--min"},b={class:"content__boxed"},w={key:1,id:"root",class:"root hd--expanded mn--min",style:{display:"block !important"}},k={class:"text-center pt-4"},x=["src"],_=(0,r.createElementVNode)("h1",{class:"h3 mb-2"},"Start a new day",-1),C=(0,r.createElementVNode)("p",null,"Clear all existing orders and start a new Day",-1),S={key:1,class:"w-100 bg-white d-flex justify-content-center",style:{"min-height":"100vh"}},B={class:"card m-auto",style:{"max-width":"400px"}},T={class:"card-body"},D={class:"text-center"},O=(0,r.createElementVNode)("svg",{height:"38px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"text-warning"},[(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1),A=(0,r.createElementVNode)("h6",{class:"my-3"}," The day has not started yet. Please wait for the administrator to start a new day ",-1);function $(e,t,o,s,d,u){const v=(0,r.resolveComponent)("loader"),V=(0,r.resolveComponent)("router-view"),$=(0,r.resolveComponent)("navigation-bar"),M=(0,r.resolveComponent)("app-header"),R=(0,r.resolveComponent)("Orders");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createVNode)(r.Transition,{name:"bounce"},{default:(0,r.withCtx)((()=>[e.$helper.empty(u.flashMessage)?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",a,[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(`message-container ${u.flashMessage.type}`)},[(0,r.createElementVNode)("div",null,["warning"==u.flashMessage.type?((0,r.openBlock)(),(0,r.createElementBlock)("svg",n,i)):(0,r.createCommentVNode)("",!0),"info"==u.flashMessage.type?((0,r.openBlock)(),(0,r.createElementBlock)("svg",c,m)):(0,r.createCommentVNode)("",!0),"success"==u.flashMessage.type?((0,r.openBlock)(),(0,r.createElementBlock)("svg",p,h)):(0,r.createCommentVNode)("",!0),"danger"==u.flashMessage.type?((0,r.openBlock)(),(0,r.createElementBlock)("svg",g,f)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("div",E,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(u.flashMessage.message),1)]),(0,r.createElementVNode)("div",{onClick:t[0]||(t[0]=t=>e.$store.commit("SET_FLASH_MESSAGE",{}))},N)],2)])]))])),_:1}),e.dayStarted?((0,r.openBlock)(),(0,r.createElementBlock)("div",y,[(0,r.createElementVNode)("section",{id:"content",class:(0,r.normalizeClass)(["content",{"bg-white":u.requiredWhiteBg}])},[(0,r.createElementVNode)("div",b,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["content__wrap",{"p-0":"OrdersCreator"==u.currentRoute}])},[u.globalAjaxRequest?((0,r.openBlock)(),(0,r.createBlock)(v,{key:0})):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(V)],2)])],2),u.appReady?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createVNode)($),(0,r.createVNode)(M)],64)):(0,r.createCommentVNode)("",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",w,[e.isCashier?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("div",k,[(0,r.createElementVNode)("img",{src:`${e.publicPath}img/logo.png`,class:"mb-2",style:{width:"150px"},alt:""},null,8,x),_,C]),(0,r.createVNode)(R,{"new-day":e.newDay},null,8,["new-day"])],64)):((0,r.openBlock)(),(0,r.createElementBlock)("div",S,[(0,r.createElementVNode)("div",B,[(0,r.createElementVNode)("div",T,[(0,r.createElementVNode)("div",D,[O,A,(0,r.createElementVNode)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(0,r.withModifiers)(((...e)=>u.signout&&u.signout(...e)),["prevent"]))}," Sign Out ")])])])]))]))],64)}const M={class:"header"},R={class:"header__inner"},L={class:"header__brand",style:{background:"#fff","border-bottom":"1px solid #141543"}},z={class:"brand-wrap"},F={href:"javascript:void(0)",class:"brand-img stretched-link"},I=["src"],P=(0,r.createElementVNode)("div",{class:"brand-title"},"TAME",-1),H={class:"header__content"},U=(0,r.createElementVNode)("div",{class:"header__content-start"},null,-1),Z={class:"header__content-end"},j={class:""},q=(0,r.createElementVNode)("button",{class:"header__btn btn btn-icon btn-sm",type:"button","data-bs-toggle":"dropdown","aria-label":"User dropdown","aria-expanded":"false"},[(0,r.createElementVNode)("i",{class:"demo-psi-male"})],-1),G={class:"dropdown-menu dropdown-menu-end w-md-200px","data-popper-placement":"bottom-end",style:{}},K={class:"d-flex align-items-center border-bottom px-3 py-2"},W={class:"flex-shrink-0"},Q={class:"flex-grow-1 ms-3"},Y={class:"mb-0"},J={class:"text-muted fst-italic"},X={class:"row"},ee={class:"col-md-12"},te={class:"list-group list-group-borderless h-100 py-3"},oe=(0,r.createElementVNode)("i",{class:"demo-pli-unlock fs-5 me-2"},null,-1);function re(e,t,o,a,l,n){const s=(0,r.resolveComponent)("avatar");return(0,r.openBlock)(),(0,r.createElementBlock)("header",M,[(0,r.createElementVNode)("div",R,[(0,r.createElementVNode)("div",L,[(0,r.createElementVNode)("div",z,[(0,r.createElementVNode)("a",F,[(0,r.createElementVNode)("img",{src:`${e.publicPath}img/logo-min.png`,alt:"TAME Logo",class:"logo",width:"40",height:"40"},null,8,I)]),P])]),(0,r.createElementVNode)("div",H,[U,(0,r.createElementVNode)("div",Z,[(0,r.createElementVNode)("div",j,[q,(0,r.createElementVNode)("div",G,[(0,r.createElementVNode)("div",K,[(0,r.createElementVNode)("div",W,[(0,r.createVNode)(s,{name:e.loggedUser.name,width:"2.25rem",height:"2.25rem"},null,8,["name"])]),(0,r.createElementVNode)("div",Q,[(0,r.createElementVNode)("h5",Y,(0,r.toDisplayString)(e.loggedUser.name),1),(0,r.createElementVNode)("span",J,(0,r.toDisplayString)(e.userRole||"Administrator"),1)])]),(0,r.createElementVNode)("div",X,[(0,r.createElementVNode)("div",ee,[(0,r.createElementVNode)("div",te,[(0,r.createElementVNode)("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=(0,r.withModifiers)(((...e)=>n.signout&&n.signout(...e)),["prevent"])),class:"list-group-item list-group-item-action"},[oe,(0,r.createTextVNode)(" Logout ")])])])])])])])])])])}var ae=o(8845),le=o(285),ne={name:"AppHeader",components:{Avatar:ae.Z},data:()=>({userDropdown:!1,notification:!1,hasReadAll:!1}),computed:{...(0,le.rn)({lockedBranch:e=>e.branch}),notifications(){return this.loggedUser.alerts||[]},hasNotifications(){return this.notifications.some((e=>null==e.read_at))&&!this.hasReadAll}},methods:{showNotifications(){this.notification=!this.notification,this.hasNotifications&&(this.$store.commit("SET_REQUEST_FLAG","READING_NOTIFICATIONS"),this.$http.get("auth/notifications/read").then((()=>{this.hasReadAll=!0})))},notificationIcon(e){var t;switch(e){case"StockTransfer":t="bg-success ni-building-fill";break;case"RequisitionUpdated":t="bg-primary-dim ni-reload";break;default:t="bg-primary ni ni-trend-up"}return t},signout(){this.$http.post("auth/logout",this.$helper.generateFormData({})).then((e=>{e.data.status&&this.$store.dispatch("logout").then((()=>{window.location.replace(this.$router.resolve({name:"FrontOfficeLogin"}).href)}))}))}}},se=o(9646);const ie=(0,se.Z)(ne,[["render",re]]);var ce=ie;const de={id:"mainnav-container",class:"mainnav border-end"},me={class:"mainnav__inner"},pe={class:"mainnav__top-content scrollable-content pb-5"},ue={class:"mainnav__profile mt-3 d-flex3"},he=(0,r.createElementVNode)("div",{class:"mt-2 d-mn-max"},null,-1),ge={class:"mininav-toggle text-center d-flex justify-content-center collapsed"},ve={class:"mainnav__categoriy pb-2 pt-5"},fe={class:"mainnav__menu nav flex-column"},Ee={key:0,class:"nav-item py-2"},Ve={class:"mb-0 w-100"},Ne=["innerHTML"],ye={class:"text-capitalize fw-normal fw-bold"},be={class:"mainnav__bottom-content border-top pb-2"},we={id:"mainnav",class:"mainnav__menu nav flex-column"},ke={class:"nav-item"},xe=(0,r.createElementVNode)("h4",{class:"mb-0 w-100"},[(0,r.createElementVNode)("i",{class:"demo-pli-unlock fs-4"})],-1),_e=(0,r.createElementVNode)("span",{class:"text-capitalize fw-normal"},"Logout",-1),Ce=[xe,_e];function Se(e,t,o,a,l,n){const s=(0,r.resolveComponent)("avatar"),i=(0,r.resolveComponent)("router-link");return(0,r.openBlock)(),(0,r.createElementBlock)("nav",de,[(0,r.createElementVNode)("div",me,[(0,r.createElementVNode)("div",pe,[(0,r.createElementVNode)("div",ue,[he,(0,r.createElementVNode)("div",ge,[(0,r.createVNode)(s,{height:"2rem",width:"2rem",name:e.loggedUser.name},null,8,["name"])])]),(0,r.createElementVNode)("div",ve,[(0,r.createElementVNode)("ul",fe,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.menus,(e=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:e.title},[n.canAccess(e.title)?((0,r.openBlock)(),(0,r.createElementBlock)("li",Ee,[(0,r.createVNode)(i,{to:e.url,class:(0,r.normalizeClass)(["text-center fw-bolder menu-text d-flex flex-column",{active:e.url.name==n.currentRoute}])},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("h4",Ve,[(0,r.createElementVNode)("span",{innerHTML:e.icon},null,8,Ne)]),(0,r.createElementVNode)("span",ye,(0,r.toDisplayString)(e.alias??""),1)])),_:2},1032,["to","class"])])):(0,r.createCommentVNode)("",!0)],64)))),128))])])]),(0,r.createElementVNode)("div",be,[(0,r.createElementVNode)("ul",we,[(0,r.createElementVNode)("li",ke,[(0,r.createElementVNode)("a",{class:"text-center fw-bolder menu-text d-flex flex-column",onClick:t[0]||(t[0]=(0,r.withModifiers)(((...e)=>n.signout&&n.signout(...e)),["prevent"])),href:"javascript:void(0)","aria-expanded":"false"},Ce)])])])])])}var Be=o(2210),Te={name:"NavigationBar",components:{Avatar:ae.Z},data:()=>({menus:Be.I}),computed:{currentRoute(){return this.$route.name},user(){return this.$store.state.user||{}},isReady(){return this.user&&Object.keys(this.user).length>0},permissions(){return this.isReady&&(this.user?.role?.pos_permissions||this.user?.role?.permissions)}},mounted(){const e={};Be.I.forEach((t=>{if(t.submenus)for(let o in t.submenus)e[t.submenus[o].name]=`${t.title}.${o}`;else e[t.url.name]=t.title})),this.$store.state.routes=e},methods:{canAccess(e,t=null){return!this.user.role_id||"ADMINISTRATOR"==this.userRole||(t?this.permissions.front_office[e]&&this.permissions.front_office[e][t]&&this.permissions.front_office[e][t].includes("R"):this.permissions.front_office[e]&&1==this.permissions.front_office[e].accessible)},signout(){"ADMINISTRATOR"==this.userRole||null==this.userRole?this.handleLogout():this.$http.post("auth/logout",this.$helper.generateFormData({})).then((e=>{e.data.status&&this.$store.dispatch("logout").then((()=>{window.location.replace(this.$router.resolve({name:"FrontOfficeLogin"}).href)}))}))}}};const De=(0,se.Z)(Te,[["render",Se]]);var Oe=De;const Ae={class:"d-none"},$e={class:"container-fluid mt-2"},Me={class:"row"},Re={class:"pt-1 col-lg-12"},Le={key:0,class:"d-flex justify-content-center",style:{"min-height":"65vh"}},ze=(0,r.createElementVNode)("span",null,"No orders found. Please wait for new orders",-1),Fe={key:1,class:"main-side scrollable-content w-100 pt-3"},Ie={class:"order-wraper d-grid"},Pe=["onClick"],He={key:0,class:"badge bg-success rounded-circle completed-order p-1"},Ue=(0,r.createElementVNode)("i",{class:"demo-pli-yes fs-5"},null,-1),Ze=[Ue],je={class:"d-flex align-items-center flex-nowrap"},qe={class:"order-left"},Ge={class:"mb-0 fw-bolder"},Ke={key:0,href:"javascript:void(0)",class:"m-0 h6"},We={class:"m-0 text-muted"},Qe={class:"text-primary"},Ye={class:"ms-auto text-end"},Je={class:"m-0 text-dark"},Xe={class:"mb-0 text-muted"},et={class:"d-flex flex-nowrap"},tt={class:"m-0"},ot={class:"fw-bolder text-dark"},rt={class:"w-100 fixed-bottom shadow border-top p-2 main-content bg-white",style:{"z-index":"999"}},at={class:"d-flex w-100 align-items-center"},lt={class:"form-group",style:{width:"200px"}},nt=(0,r.createElementVNode)("label",{class:"mb-0",for:"from-date"},"System Date",-1),st={class:"form-group mx-2",style:{width:"200px"}},it=(0,r.createElementVNode)("label",{class:"mb-0",for:"to-date"},"Current Date",-1),ct={class:"form-group"},dt=(0,r.createElementVNode)("label",{for:"from-date",class:"invisible d-block mb-0"},"Confirm",-1);function mt(e,t,o,a,l,n){const s=(0,r.resolveComponent)("receipt-one"),i=(0,r.resolveComponent)("empty-results"),c=(0,r.resolveComponent)("OrderModal"),d=(0,r.resolveComponent)("wolf-button");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("div",Ae,[(0,r.createVNode)(s,{order:e.printedOrder},null,8,["order"])]),(0,r.createElementVNode)("div",$e,[(0,r.createElementVNode)("div",Me,[(0,r.createElementVNode)("div",Re,[e.rows.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Fe,[(0,r.createElementVNode)("div",Ie,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.rows,((t,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("a",{href:"javascript:void(0)",class:(0,r.normalizeClass)(["rounded-2 box-shadow bg-white border p-2 order-list-item mb-2 position-relative",{active:e.selectedOrder&&e.selectedOrder.id==t.id}]),key:"order"+o,onClick:(0,r.withModifiers)((e=>n.selectOrder(t)),["prevent"])},[1==t.printed?((0,r.openBlock)(),(0,r.createElementBlock)("span",He,Ze)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",je,[(0,r.createElementVNode)("div",qe,[(0,r.createElementVNode)("h6",Ge," Order: #"+(0,r.toDisplayString)(e.$helper.padNumber(t.id)),1),t.table?((0,r.openBlock)(),(0,r.createElementBlock)("a",Ke,(0,r.toDisplayString)(t.table?.name),1)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("h6",We," By: "+(0,r.toDisplayString)(t.waiter?t.waiter.name:"Administrator"),1),(0,r.createElementVNode)("span",Qe,"Items "+(0,r.toDisplayString)(t.items.length),1)]),(0,r.createElementVNode)("div",Ye,[(0,r.createElementVNode)("p",Je,(0,r.toDisplayString)(e.$helper.formatOrderDate(t.created_at)),1),(0,r.createElementVNode)("p",Xe,(0,r.toDisplayString)(e.$helper.formatOrderTime(t.created_at)),1),(0,r.createElementVNode)("div",et,[(0,r.createElementVNode)("h6",tt,[(0,r.createElementVNode)("span",ot,(0,r.toDisplayString)(e.formatMoney(t.grand_total)),1)])])])])],10,Pe)))),128))])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",Le,[(0,r.createVNode)(i,null,{description:(0,r.withCtx)((()=>[ze])),_:1})]))])])]),e.$helper.empty(e.selectedOrder)?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,order:e.selectedOrder,onClosed:n.closeSidebar,onPaid:n.handlePaidOrder,onDeleted:n.handlePaidOrder,onPrinted:n.handlePrintedOrder,isEod:!0},null,8,["order","onClosed","onPaid","onDeleted","onPrinted"])),(0,r.createElementVNode)("div",rt,[(0,r.createElementVNode)("div",at,[(0,r.createElementVNode)("div",lt,[nt,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"date",class:"form-control form-control-lg","onUpdate:modelValue":t[0]||(t[0]=t=>e.days.from=t),id:"from-date"},null,512),[[r.vModelText,e.days.from]])]),(0,r.createElementVNode)("div",st,[it,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"date",class:"form-control form-control-lg","onUpdate:modelValue":t[1]||(t[1]=t=>e.days.to=t),id:"to-date"},null,512),[[r.vModelText,e.days.to]])]),(0,r.createElementVNode)("div",ct,[dt,(0,r.createVNode)(d,{type:"button",onClicked:n.createNewDay,disabler:e.rows.length>0,activator:"CREATING_EDO",class:"btn btn-primary"},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)("Confirm")])),_:1},8,["onClicked","disabler"])])])])],64)}var pt=o(7226),ut=o(1708),ht=o(1454),gt={name:"Orders",components:{EmptyResults:pt.Z,OrderModal:ut.Z,ReceiptOne:ht.Z},props:["newDay"],data:()=>({fetchUrl:"orders",selectedOrder:null,rows:[],client:null,days:{},printedOrder:{}}),created(){this.$http.get(this.fetchUrl).then((e=>{this.rows=e.data.rows,this.rows.length||this.createNewDay()}))},methods:{handlePrintedOrder(){const e=this.rows.findIndex((e=>e.id==this.selectedOrder.id));this.rows[e].status="DELIVERED",this.rows[e].printed=1,this.printedOrder=this.rows[e],setTimeout((()=>{this.storePrintableOrder({category:"INVOICE",order_id:this.printedOrder.id})}),1e3)},createNewDay(){this.$http.post("settings/close-day",this.$helper.generateFormData(this.days)).then((e=>{e.data.status&&(this.$store.state.isCorrectSystemDay=!0,this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"END OF DAY created successfully"}),location.reload())}))},handlePaidOrder(){const e=this.rows.findIndex((e=>e.id==this.selectedOrder.id));this.rows.splice(e,1),this.closeSidebar()},selectOrder(e){e?document.querySelector("#root").classList.add("sb--show"):document.querySelector("#root").classList.remove("sb--show"),this.selectedOrder=e},closeSidebar(){document.querySelector("#root").classList.remove("sb--show"),this.selectedOrder=null}},mounted(){this.getPaymentsMeta(),this.$nextTick((()=>{this.days={...this.newDay}}))}};const vt=(0,se.Z)(gt,[["render",mt]]);var ft=vt,Et=o(9269),Vt=o(6127),Nt={mixins:[Vt.k],components:{AppHeader:ce,NavigationBar:Oe,Loader:Et.Z,Orders:ft},data:()=>({dayStarted:!0,newDay:{from:new Date(TODAY).toLocaleString("fr-CA",{timeZone:TIMEZONE}).slice(0,10),to:new Date(TODAY).toLocaleString("fr-CA",{timeZone:TIMEZONE}).slice(0,10)}}),computed:{flashMessage(){return this.$store.state.flashMessage},appSettings(){return this.$store.state.settings},appReady(){return!this.$helper.empty(this.loggedUser)},globalAjaxRequest(){return this.$store.state.isLoading&&!Object.keys(this.$store.getters.pendingRequests).length},currentRoute(){return this.$route.name},requiredWhiteBg(){return["FrontOfficeSalesReport"].includes(this.$route.name)}},created(){this.isUserLoggedIn&&this.$http.get("auth/myself").then((e=>{this.$store.commit("SET_CURRENT_USER",{...e.data.user})})),this.$http.post("frontend/preloaders",this.$helper.generateFormData({keys:Object.keys(this.appSettings)})).then((e=>{this.$store.commit("SET_APP_SETTINGS",e.data)}))},methods:{signout(){this.$http.post("auth/logout",this.$helper.generateFormData({})).then((e=>{e.data.status&&this.$store.dispatch("logout").then((()=>{window.location.replace(this.$router.resolve({name:"FrontOfficeLogin"}).href)}))}))}},mounted(){if(this.isUserLoggedIn){this.$store.commit("SET_REQUEST_FLAG","GET_LAST_EOD");const e="settings/eod/latest";this.$http.get(e).then((e=>{var t=new Date(e.data.yesterday);e.data.row&&(t=e.data.row.to_date),TODAY!=t&&(this.newDay.from=new Date(t).toLocaleString("fr-CA",{timeZone:TIMEZONE}).slice(0,10),this.$store.commit("SET_FLASH_MESSAGE",{type:"danger",message:"The day has not started yet"}),this.dayStarted=!1)}))}},watch:{$route(e){"OrdersCreator"==e.name?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")}}};const yt=(0,se.Z)(Nt,[["render",$]]);var bt=yt,wt=(o(8314),o(3478)),kt=o(7934),xt=o(8068),_t=o(5047),Ct=o(2950),St=o(2493),Bt=o(6320),Tt=o(9090),Dt=o(1540);const Ot=(0,r.createApp)(bt);xt.Z.withCredentials=!0,xt.Z.interceptors.request.use((e=>{const t=localStorage.getItem("_branch");return t&&(e.url=(0,Dt.aF)(e.url,{current_branch:JSON.parse(t).id})),kt.Z.state.isLoading=!0,kt.Z.state.requestFlag&&(kt.Z.state.pendingRequests[kt.Z.state.requestFlag]=e.url,kt.Z.state.requestFlag=null),e}),(e=>(kt.Z.commit("REQUEST_RESOLVED",e.config.url),Promise.reject(e)))),xt.Z.interceptors.response.use((e=>(kt.Z.commit("REQUEST_RESOLVED",e.config.url),e)),(e=>(kt.Z.commit("REQUEST_RESOLVED",e.config.url),401===e.response.status&&localStorage.removeItem("token"),500==e.response.status&&kt.Z.commit("SET_FLASH_MESSAGE",{type:"danger",message:"Error Occured. Please contact system administrator"}),Promise.reject(e)))),Ot.config.globalProperties.$http=xt.Z,Ot.config.globalProperties.$http.defaults.baseURL="/api/pos/";const At=localStorage.getItem("token");At&&(Ot.config.globalProperties.$http.defaults.headers.common["Authorization"]="Bearer "+At),Ot.component("wolf-button",St.Z),Ot.mixin(_t.h),Ot.use(Bt.Z,kt.Z).use(Tt.Z,kt.Z).use(Ct.Z).use(kt.Z).use(wt.Z).mount("#app")},2210:function(e,t,o){o.d(t,{I:function(){return a}});var r=o(1540);const a=[{title:"place_orders",icon:'<i class="demo-pli-mine fs-4"></i>',url:{name:"OrdersCreator",params:{action:"new"}},extras:r.tH,alias:"Menu"},{title:"waiter_orders",icon:'<svg height="18px" class="fs-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"></path><path d="M2 3h10v2H2V3zm0 3h4v3H2V6zm0 4h4v1H2v-1zm0 2h4v1H2v-1zm5-6h2v1H7V6zm3 0h2v1h-2V6zM7 8h2v1H7V8zm3 0h2v1h-2V8zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1z"></path></svg>',url:{name:"WaiterOrders"},extras:r.mG,alias:"Orders"},{title:"kitchen_orders",icon:'<svg height="15px" class="fs-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" d="M14.763.075A.5.5 0 0 1 15 .5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V14h-1v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V10a.5.5 0 0 1 .342-.474L6 7.64V4.5a.5.5 0 0 1 .276-.447l8-4a.5.5 0 0 1 .487.022zM6 8.694L1 10.36V15h5V8.694zM7 15h2v-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5V15h2V1.309l-7 3.5V15z"></path><path d="M2 11h1v1H2v-1zm2 0h1v1H4v-1zm-2 2h1v1H2v-1zm2 0h1v1H4v-1zm4-4h1v1H8V9zm2 0h1v1h-1V9zm-2 2h1v1H8v-1zm2 0h1v1h-1v-1zm2-2h1v1h-1V9zm0 2h1v1h-1v-1zM8 7h1v1H8V7zm2 0h1v1h-1V7zm2 0h1v1h-1V7zM8 5h1v1H8V5zm2 0h1v1h-1V5zm2 0h1v1h-1V5zm0-2h1v1h-1V3z"></path></svg>',url:{name:"KitchenOrders"},extras:[],alias:"Kitech"},{title:"bar_orders",icon:'<svg height="17px" class="fs-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>',url:{name:"BarOrders"},extras:[],alias:"Bar"},{title:"sales_report",icon:'<svg height="18px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>',url:{name:"FrontOfficeSalesReport"},extras:[],alias:"Sales"}]},7226:function(e,t,o){o.d(t,{Z:function(){return h}});var r=o(1005);const a={class:"d-flex align-items-center justify-content-between"},l={class:"p-2 w-100"},n={class:"ant-empty"},s={class:"ant-empty-image",style:{height:"60px"}},i=["src"],c={class:"ant-empty-description"};function d(e,t,o,d,m,p){return(0,r.openBlock)(),(0,r.createElementBlock)("div",a,[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("img",{alt:"empty",src:`${e.publicPath}img/original.png`},null,8,i)]),(0,r.createElementVNode)("div",c,[(0,r.renderSlot)(e.$slots,"description",{},void 0,!0)])])])])}var m={name:"EmptyResults",props:["description"]},p=o(9646);const u=(0,p.Z)(m,[["render",d],["__scopeId","data-v-fdeb3bae"]]);var h=u},1708:function(e,t,o){o.d(t,{Z:function(){return Tt}});var r=o(1005);const a=e=>((0,r.pushScopeId)("data-v-6deacf3b"),e=e(),(0,r.popScopeId)(),e),l={class:"sidebar tame-drawer"},n={class:"sidebar__inner pt-2 px-2 overflow-hidden"},s={class:"sidebar__stuck align-item-center d-flex py-2 border-bottom mb-2"},i={class:"fw-bolder mb-0"},c={class:"ms-auto"},d=a((()=>(0,r.createElementVNode)("i",{class:"uil uil-file-share-alt fw-bold icon fs-6"},null,-1))),m=[d],p=a((()=>(0,r.createElementVNode)("i",{class:"demo-pli-printer fw-bold icon fs-6"},null,-1))),u=[p],h=a((()=>(0,r.createElementVNode)("i",{class:"demo-pli-cross fw-bold icon fs-6"},null,-1))),g=[h],v={class:"sidebar__wrap pos-cart scrollable-content"},f={class:"rounded shadown bg-white p-2 mb-3"},E={class:"d-flex align-items-center flex-nowrap justify-content-between"},V={key:0,class:"d-flex align-items-center flex-nowrap w-100"},N={class:"bg-primary rounded-1 p-2 text-center"},y={class:"m-0 text-white fw-bolder"},b={class:"ms-2 w-100"},w={class:"w-100 d-flex align-items-center"},k={class:"mb-1"},x={class:"text-dark"},_=a((()=>(0,r.createElementVNode)("svg",{height:"18px",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})],-1))),C=a((()=>(0,r.createElementVNode)("div",{class:"vertical-line mx-2"},null,-1))),S={key:1,class:"d-flex align-items-center flex-nowrap w-100"},B={class:"bg-primary rounded-1 p-2 text-center"},T={class:"m-0 text-white fw-bolder"},D={class:"ms-2 w-100"},O={class:"w-100 d-flex align-items-center"},A={class:"mb-1"},$={class:"text-dark"},M=a((()=>(0,r.createElementVNode)("svg",{height:"18px",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,r.createElementVNode)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})],-1))),R={class:""},L={class:"accordion",id:"_dm-summaryAccordion"},z={class:"accordion-item"},F={class:"accordion-header",id:"_dm-defAccHeadingTwo"},I={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#_dm-defAccCollapseTwo","aria-expanded":"true","aria-controls":"_dm-defAccCollapseTwo"},P={class:"d-flex align-items-center w-100"},H=a((()=>(0,r.createElementVNode)("span",{class:"bg-gray-900 text-white p-1 rounded-circle me-1"},[(0,r.createElementVNode)("svg",{height:"15px",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},[(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"})])],-1))),U=a((()=>(0,r.createElementVNode)("span",{class:"me-3"},"Order Summary",-1))),Z={class:"ms-auto fw-bolder m-2 h5 mb-0"},j={id:"_dm-defAccCollapseTwo",class:"accordion-collapse collapse show","aria-labelledby":"_dm-defAccHeadingTwo","data-bs-parent":"#_dm-summaryAccordion",style:{}},q={class:"accordion-body p-2"},G={class:"bg-white rounded px-3 py-4 mb-2"},K={class:"d-flex align-items-center flex-nowrap"},W={class:"text-foggy"},Q={class:"fw-bold d-block"},Y={class:"fw-normal d-block"},J={class:"ms-auto"},X={class:"fw-bolder text-dark h6"},ee=["onClick"],te=a((()=>(0,r.createElementVNode)("i",{class:"demo-pli-trash fs-5 ms-2"},null,-1))),oe=[te],re={key:0,class:"addons-container ps-1 my-1"},ae={class:"widget widget-categories"},le={class:"has-children"},ne={class:"collapse show py-0"},se={href:"javascript:void(0)",class:"d-flex align-items-center fw-normal"},ie={class:"ms-auto"},ce={key:1,class:"py-2 px-3 border mb-2 rounded-1",style:{background:"#f9fafc"}},de=a((()=>(0,r.createElementVNode)("span",{class:"fw-bolder mb-2"},"Notes:",-1))),me={class:"mb-0"},pe={key:0,class:"sidebar__stuck align-item-center d-flex py-2 border-top mt-2 position-absolute bottom-0 w-100"},ue={key:0,class:"w-50 px-1 pb-2"},he=a((()=>(0,r.createElementVNode)("span",{class:"text-danger"},"Reject",-1))),ge=[he],ve={key:1,class:"w-50 px-1 pb-2"},fe={class:"border-top border-3 border-primary shadow position-absolute w-100 p-3 bottom-0 bg-white payment-wrapper payment-hidden",style:{"z-index":"99999","margin-left":"-7px"}},Ee={class:"d-flex align-items-center pb-2 border-bottom"},Ve={key:0,class:"nav nav-pills"},Ne={class:"nav-item me-2"},ye=a((()=>(0,r.createElementVNode)("i",{class:"uil uil-money-withdraw me-1"},null,-1))),be={class:"nav-item"},we=a((()=>(0,r.createElementVNode)("i",{class:"uil uil-chat-bubble-user me-1"},null,-1))),ke={key:1},xe={class:"ms-auto"},_e=a((()=>(0,r.createElementVNode)("i",{class:"demo-pli-cross fw-bold icon fs-6"},null,-1))),Ce=[_e],Se={key:0,class:"payment-form py-3"},Be={class:"row mb-2"},Te=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5 required"},"Paid Amount",-1))),De={class:"col-lg-6 col-md-7"},Oe={class:"row mb-2"},Ae=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5"},"Amount Due",-1))),$e={class:"col-lg-6 col-md-7 text-end"},Me={class:"fw-bold h5"},Re={class:"row mb-2"},Le=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5 required"},"Payment Method",-1))),ze={class:"col-lg-6 col-md-7"},Fe=a((()=>(0,r.createElementVNode)("option",{value:"null",hidden:"",disabled:""}," Select option ",-1))),Ie=["value"],Pe={class:"row mb-2"},He=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5 required"},"Deposited To",-1))),Ue={class:"col-lg-6 col-md-7"},Ze=a((()=>(0,r.createElementVNode)("option",{value:"null",hidden:"",disabled:""}," Select option ",-1))),je=["value"],qe={class:"row mb-2"},Ge=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5"},"Payment Ref",-1))),Ke={class:"col-lg-6 col-md-7"},We={class:"row mb-2"},Qe=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5"},"Comment",-1))),Ye={class:"col-lg-6 col-md-7"},Je={class:"row"},Xe=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5"},null,-1))),et={class:"col-lg-6 col-md-7"},tt={class:"row mb-2"},ot=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5"},"Amount Due",-1))),rt={class:"col-lg-6 col-md-7 text-end"},at={class:"fw-bold h5"},lt={class:"row mb-2"},nt=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5"},"Client",-1))),st={class:"col-lg-6 col-md-7"},it={class:"position-sticky bottom-0 bg-white"},ct={class:"border-top dropdown-item pl-7"},dt=a((()=>(0,r.createElementVNode)("span",{class:"text-blue cursor-pointer"},[(0,r.createElementVNode)("svg",{height:"18px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,r.createElementVNode)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.createElementVNode)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,r.createElementVNode)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]),(0,r.createTextVNode)("  Add New")],-1))),mt=[dt],pt={class:"row"},ut=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5"},null,-1))),ht={class:"col-lg-6 col-md-7"},gt={key:1,class:"py-3"},vt=a((()=>(0,r.createElementVNode)("div",{class:"alert alert-warning",role:"alert"}," If you confirm, there is way to restore deleted order. ",-1))),ft={class:"row mb-2"},Et=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5 fw-bold required"},"Comment",-1))),Vt={class:"col-lg-9 col-md-7"},Nt={class:"row"},yt=a((()=>(0,r.createElementVNode)("label",{class:"col-lg-3 col-md-5"},null,-1))),bt={class:"col-lg-6 col-md-7"};function wt(e,t,o,a,d,p){const h=(0,r.resolveComponent)("wolf-button"),te=(0,r.resolveComponent)("zoho-search"),he=(0,r.resolveComponent)("client-creator");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("aside",l,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("h5",i," Order No#"+(0,r.toDisplayString)(e.$helper.generateVoucherNo(o.order.id)),1),(0,r.createElementVNode)("div",c,[0==o.order.printed&&e.isCashier?((0,r.openBlock)(),(0,r.createElementBlock)("a",{key:0,class:"text-primary me-1 border rounded fw-bolder",style:{padding:"0.1rem 0.25rem"},href:"javascript:void(0)",onClick:t[0]||(t[0]=(0,r.withModifiers)((t=>e.$emit("requestSplit")),["prevent"]))},m)):(0,r.createCommentVNode)("",!0),0==o.order.printed?((0,r.openBlock)(),(0,r.createElementBlock)("a",{key:1,class:"text-primary me-1 border rounded fw-bolder",style:{padding:"0.1rem 0.25rem"},href:"javascript:void(0)",onClick:t[1]||(t[1]=(0,r.withModifiers)((t=>p.handleOrderPrint(o.order,e.i)),["prevent"]))},u)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("a",{href:"javascript:void(0)",class:"text-primary ms-1 border rounded fw-bolder",onClick:t[2]||(t[2]=(0,r.withModifiers)((t=>e.$emit("closed")),["prevent"])),style:{padding:"0.1rem 0.25rem"}},g)])]),(0,r.createElementVNode)("div",v,[(0,r.createElementVNode)("div",f,[(0,r.createElementVNode)("div",E,[e.kitchenItems.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",V,[(0,r.createElementVNode)("div",N,[(0,r.createElementVNode)("h4",y,"T"+(0,r.toDisplayString)(o.order.table?.id),1)]),(0,r.createElementVNode)("div",b,[(0,r.createElementVNode)("div",w,[(0,r.createElementVNode)("h5",k,(0,r.toDisplayString)(o.order.client?o.order.client.name:"Walk-in customer"),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)("dot sq ms-auto h6 mb-0 "+(1==e.kitchenItems[0].delivered?"bg-success":"bg-warning")),style:{width:"14px",height:"14px"}},null,2)]),(0,r.createElementVNode)("span",x,[(0,r.createTextVNode)((0,r.toDisplayString)(e.kitchenItems.length)+" items   ",1),_,(0,r.createTextVNode)(" Kitchen ")])])])):(0,r.createCommentVNode)("",!0),C,e.barItems.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",S,[(0,r.createElementVNode)("div",B,[(0,r.createElementVNode)("h4",T,"T"+(0,r.toDisplayString)(o.order.table?.id),1)]),(0,r.createElementVNode)("div",D,[(0,r.createElementVNode)("div",O,[(0,r.createElementVNode)("h5",A,(0,r.toDisplayString)(o.order.client?o.order.client.name:"Walk-in customer"),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)("dot sq ms-auto h6 mb-0 "+(1==e.barItems[0].delivered?"bg-success":"bg-warning")),style:{width:"14px",height:"14px"}},null,2)]),(0,r.createElementVNode)("span",$,[(0,r.createTextVNode)((0,r.toDisplayString)(e.barItems.length)+" item(s)   ",1),M,(0,r.createTextVNode)(" Bar ")])])])):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",R,[(0,r.createElementVNode)("div",L,[(0,r.createElementVNode)("div",z,[(0,r.createElementVNode)("div",F,[(0,r.createElementVNode)("button",I,[(0,r.createElementVNode)("div",P,[H,U,(0,r.createElementVNode)("span",Z,(0,r.toDisplayString)(e.formatMoney(o.order.grand_total)),1)])])]),(0,r.createElementVNode)("div",j,[(0,r.createElementVNode)("div",q,[(0,r.createElementVNode)("div",G,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.order.items,((t,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"border-bottom mb-2",key:"order_items"+a},[(0,r.createElementVNode)("div",K,[(0,r.createElementVNode)("h6",W,[(0,r.createElementVNode)("span",Q,(0,r.toDisplayString)(t.name),1),(0,r.createElementVNode)("span",Y,(0,r.toDisplayString)(t.quantity)+" x "+(0,r.toDisplayString)(e.$helper.formatNumber(t.price)),1)]),(0,r.createElementVNode)("div",J,[(0,r.createElementVNode)("span",X,(0,r.toDisplayString)(e.formatMoney(t.amount)),1),0==o.order.resolved&&e.hasPermissionTo("D")?((0,r.openBlock)(),(0,r.createElementBlock)("a",{key:0,class:"text-danger",href:"javascript:void(0)",onClick:(0,r.withModifiers)((e=>p.handleItemDelete(o.order.id,t)),["prevent"])},oe,8,ee)):(0,r.createCommentVNode)("",!0)])]),t.addons&&t.addons.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",re,[(0,r.createElementVNode)("div",ae,[(0,r.createElementVNode)("ul",null,[(0,r.createElementVNode)("li",le,[(0,r.createElementVNode)("ul",ne,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(t.addons,((t,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:a+"addon"+o},[(0,r.createElementVNode)("a",se,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(t.name),1),(0,r.createElementVNode)("span",ie,(0,r.toDisplayString)(e.formatMoney(0)),1)])])))),128))])])])])])):(0,r.createCommentVNode)("",!0),t.comment?((0,r.openBlock)(),(0,r.createElementBlock)("div",ce,[de,(0,r.createElementVNode)("p",me,(0,r.toDisplayString)(t.comment),1)])):(0,r.createCommentVNode)("",!0)])))),128))])])])])])])]),0==o.order.paid&&0==o.order.resolved&&e.isCashier?((0,r.openBlock)(),(0,r.createElementBlock)("div",pe,[e.hasPermissionTo("D")?((0,r.openBlock)(),(0,r.createElementBlock)("div",ue,[(0,r.createElementVNode)("button",{class:"btn btn-light border w-100",type:"button",onClick:t[3]||(t[3]=()=>{e.actionType="REJECT",p.togglePaymentWrapper()})},ge)])):(0,r.createCommentVNode)("",!0),1==o.order.printed?((0,r.openBlock)(),(0,r.createElementBlock)("div",ve,[(0,r.createElementVNode)("button",{class:"bnt-block btn btn-primary w-100",type:"button",onClick:t[4]||(t[4]=(...e)=>p.togglePaymentWrapper&&p.togglePaymentWrapper(...e))}," Pay "+(0,r.toDisplayString)(e.formatMoney(o.order.grand_total-o.order.paid_amount)),1)])):(0,r.createCommentVNode)("",!0)])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",fe,[(0,r.createElementVNode)("div",Ee,["RESOLVE"==e.actionType?((0,r.openBlock)(),(0,r.createElementBlock)("ul",Ve,[(0,r.createElementVNode)("li",Ne,[(0,r.createElementVNode)("a",{class:(0,r.normalizeClass)(["nav-link h5 mb-0 border",{active:"payment"==e.currentTab}]),href:"#!",onClick:t[5]||(t[5]=(0,r.withModifiers)((t=>e.currentTab="payment"),["prevent"]))},[ye,(0,r.createTextVNode)("Process Payment")],2)]),(0,r.createElementVNode)("li",be,[(0,r.createElementVNode)("a",{class:(0,r.normalizeClass)(["nav-link h5 mb-0 border",{active:"assign"==e.currentTab}]),href:"#!",onClick:t[6]||(t[6]=(0,r.withModifiers)((t=>e.currentTab="assign"),["prevent"]))},[we,(0,r.createTextVNode)("Credit Post")],2)])])):((0,r.openBlock)(),(0,r.createElementBlock)("h5",ke,"Delete Order #"+(0,r.toDisplayString)(e.$helper.padNumber(o.order.id)),1)),(0,r.createElementVNode)("div",xe,[(0,r.createElementVNode)("a",{href:"javascript:void(0)",onClick:t[7]||(t[7]=(0,r.withModifiers)((()=>{e.actionType="RESOLVE",p.togglePaymentWrapper()}),["prevent"])),class:"text-primary ms-1 border rounded fw-bolder",style:{padding:"0.1rem 0.25rem"}},Ce)])]),"RESOLVE"==e.actionType?((0,r.openBlock)(),(0,r.createElementBlock)("div",Se,["payment"==e.currentTab?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("div",Be,[Te,(0,r.createElementVNode)("div",De,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=t=>e.amount_paid=t),class:"form-control",placeholder:"Amount to pay",onKeyup:t[9]||(t[9]=(...e)=>p.calculateRemainAmount&&p.calculateRemainAmount(...e))},null,544),[[r.vModelText,e.amount_paid]])])]),(0,r.createElementVNode)("div",Oe,[Ae,(0,r.createElementVNode)("div",$e,[(0,r.createElementVNode)("span",Me,(0,r.toDisplayString)(e.formatMoney(e.amount_remain)),1)])]),e.amount_paid&&e.amount_paid>0?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("div",Re,[Le,(0,r.createElementVNode)("div",ze,[(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control form-select","onUpdate:modelValue":t[10]||(t[10]=t=>e.payment_method=t)},[Fe,((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(p.paymentModes,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{value:e.id,key:e.id},(0,r.toDisplayString)(e.name),9,Ie)))),128))],512),[[r.vModelSelect,e.payment_method]])])]),(0,r.createElementVNode)("div",Pe,[He,(0,r.createElementVNode)("div",Ue,[(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control form-select","onUpdate:modelValue":t[11]||(t[11]=t=>e.account_id=t)},[Ze,((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(p.accounts,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{value:e.id,key:e.id},(0,r.toDisplayString)(e.name),9,je)))),128))],512),[[r.vModelSelect,e.account_id]])])]),(0,r.createElementVNode)("div",qe,[Ge,(0,r.createElementVNode)("div",Ke,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=t=>e.payment_ref=t),class:"form-control"},null,512),[[r.vModelText,e.payment_ref]])])])],64)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",We,[Qe,(0,r.createElementVNode)("div",Ye,[(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[13]||(t[13]=t=>e.comment=t),rows:"3",class:"form-control",placeholder:"Optional comment"},null,512),[[r.vModelText,e.comment]])])]),(0,r.createElementVNode)("div",Je,[Xe,(0,r.createElementVNode)("div",et,[(0,r.createVNode)(h,{class:"bnt-block btn btn-primary w-100",activator:"PAYING_BILL",disabler:p.submitDisabled,onClicked:p.handlePayment},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)(" Confirm ")])),_:1},8,["disabler","onClicked"])])])],64)):(0,r.createCommentVNode)("",!0),"assign"==e.currentTab?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createElementVNode)("div",tt,[ot,(0,r.createElementVNode)("div",rt,[(0,r.createElementVNode)("span",at,(0,r.toDisplayString)(e.formatMoney(o.order?.grand_total-o.order?.paid_amount)),1)])]),(0,r.createElementVNode)("div",lt,[nt,(0,r.createElementVNode)("div",st,[(0,r.createVNode)(te,{url:"clients/search",label:"name","primary-key":"id",placeholder:"Select Client",modelValue:e.customer,"onUpdate:modelValue":t[15]||(t[15]=t=>e.customer=t),"load-defaults":!0,"fetch-flag":"SEARCHING_FOR_CLIENTS","is-vertical":!0,records:e.clients},{footer:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",it,[(0,r.createElementVNode)("li",ct,[(0,r.createElementVNode)("a",{href:"javascript:void(0)",onClick:t[14]||(t[14]=(0,r.withModifiers)((t=>e.newClientModalOpen=!0),["prevent"]))},mt)])])])),_:1},8,["modelValue","records"])])]),(0,r.createElementVNode)("div",pt,[ut,(0,r.createElementVNode)("div",ht,[(0,r.createVNode)(h,{class:"bnt-block btn btn-primary w-100",activator:"HANDLE_CREDIT_POST",disabler:!e.customer,onClicked:p.assignClient},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)(" Confirm and Assign ")])),_:1},8,["disabler","onClicked"])])])],64)):(0,r.createCommentVNode)("",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",gt,[vt,(0,r.createElementVNode)("div",ft,[Et,(0,r.createElementVNode)("div",Vt,[(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[16]||(t[16]=t=>e.comment=t),rows:"3",class:"form-control",placeholder:"Optional comment"},null,512),[[r.vModelText,e.comment]])])]),(0,r.createElementVNode)("div",Nt,[yt,(0,r.createElementVNode)("div",bt,[(0,r.createVNode)(h,{class:"bnt-block btn btn-danger",activator:"REJECTING_ORDER",disabler:!e.comment,onClicked:p.handleDestroy},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)(" Confirm ")])),_:1},8,["disabler","onClicked"])])])]))])])]),e.newClientModalOpen?((0,r.openBlock)(),(0,r.createBlock)(he,{key:0,onClosed:t[17]||(t[17]=t=>e.newClientModalOpen=!1),onSaved:p.handleAddedClient},null,8,["onSaved"])):(0,r.createCommentVNode)("",!0)],64)}o(1788);var kt=o(6127),xt=o(9623),_t=o(3618),Ct={name:"OrderModal",props:["order","isEod"],emits:["closed","paid","deleted","printed","itemDeleted","requestSplit"],mixins:[kt.k],components:{ZohoSearch:xt.Z,ClientCreator:_t.Z},data:()=>({payment_method:null,account_id:null,payment_ref:null,comment:null,amount_paid:0,amount_remain:0,barItems:[],kitchenItems:[],currentTab:"payment",customer:null,actionType:"RESOLVE",clients:[],newClientModalOpen:!1}),computed:{submitDisabled(){return!this.payment_method||!this.account_id||!this.amount_paid||this.amount_paid<=0},accounts(){return this.$store.state.accounts},paymentModes(){return this.$store.state.paymentModes}},created(){this.order.items.forEach((e=>{"BAR"==e.destination?this.barItems.push(e):this.kitchenItems.push(e)})),this.amount_paid=this.order.grand_total-this.order.paid_amount,this.customer=this.order?.client_id},methods:{handleAddedClient(e){this.clients.push(e),this.newClientModalOpen=!1,this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"Client added successfully"})},handleOrderPrint(e){this.$confirm({title:"Printing order invoice",content:`Are you sure you want to print order #${this.$helper.generateVoucherNo(e.id)} and make it as completed?`,classes:"btn btn-primary",actionText:"Complete",closeText:"Cancel",action:()=>{this.$http.get(`orders/invoice/${e.id}/print`).then((e=>{e.data.status&&(this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"Order sent to print command successfully"}),this.$emit("printed",!0))}))}})},calculateRemainAmount(){this.amount_remain=this.order.grand_total-this.order.paid_amount-this.amount_paid},togglePaymentWrapper(){document.querySelector(".payment-wrapper").classList.toggle("payment-hidden")},toggleAssignWrapper(){document.querySelector(".assign-wrapper").classList.toggle("assign-hidden")},handleDestroy(){this.$http.post("orders/delete",this.$helper.generateFormData({order_id:this.order.id,comment:this.comment})).then((e=>{e.data.status&&(this.$emit("deleted",!0),this.actionType="RESOLVE",this.comment=null,this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"Order deleted successfully"}))}))},handlePayment(){let e=0;this.isEod&&(e=1),this.$http.post("orders/payment?is_eod="+e,this.$helper.generateFormData({order:this.order.id,payment_method:this.payment_method,account_id:this.account_id,payment_ref:this.payment_ref,comment:this.comment,discount:0,amount_paid:this.amount_paid,amount_remain:this.amount_remain})).then((e=>{e.data.status&&(this.$emit("paid",{amount_paid:this.amount_paid,amount_remain:this.amount_remain}),this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:`Payment to order ${this.order.reference} has been made sucessfully`}))}))},assignClient(){this.$http.post("orders/unpaid/assign",this.$helper.generateFormData({client_id:this.customer,order_id:this.order.id,amount_remain:this.order.grand_total-this.order.paid_amount})).then((e=>{e.data.status&&(this.$emit("paid",{amount_paid:0,credited:1,amount_remain:this.order.grand_total-this.order.paid_amount}),this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"Credit posted successfully"}))}))},handleItemDelete(e,t){this.$confirm({title:"Removing item",content:`Are you sure you want to remove ${t.name} from invoice #${this.$helper.generateVoucherNo(e)}?`,classes:"btn btn-primary",actionText:"Complete",closeText:"Cancel",action:()=>{this.$http.get(`orders/invoices/${e}/destroy/${t.item_id}`).then((o=>{o.data.status&&(this.$store.commit("SET_FLASH_MESSAGE",{type:"success",message:"Item deleted successfully"}),this.$emit("itemDeleted",{orderId:e,item:t}))}))}})}}},St=o(9646);const Bt=(0,St.Z)(Ct,[["render",wt],["__scopeId","data-v-6deacf3b"]]);var Tt=Bt},9623:function(e,t,o){o.d(t,{Z:function(){return V}});var r=o(1005);const a=e=>((0,r.pushScopeId)("data-v-3dd0a9aa"),e=e(),(0,r.popScopeId)(),e),l={class:"quick-search"},n={class:"dropdown show ac-dropdown ember-view"},s={class:"input-group btn-group"},i={class:"auto-select ac-selected w-100","data-bs-toggle":"dropdown","data-bs-target":"#search-dropdown"},c=["placeholder"],d=["onClick"],m={key:0,version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",viewBox:"0 0 512 512","xml:space":"preserve",class:"icon icon-ok icon-xs"},p=a((()=>(0,r.createElementVNode)("path",{d:"M503.4 141.1c-5.6-5.6-12.9-8.6-20.8-8.6s-15.3 3.1-20.8 8.6L162.1 440.7 50.2 328.8c-11.5-11.5-30.2-11.5-41.6 0-11.5 11.5-11.5 30.2 0 41.6l132.8 132.9c5.6 5.5 13 8.5 20.8 8.5 7.9 0 15.5-3.2 20.9-8.7l320.4-320.4c11.4-11.5 11.4-30.2-.1-41.6z"},null,-1))),u=[p],h={key:0,class:"py-2"};function g(e,t,o,a,p,g){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"search-field ember-view",onFocusout:t[2]||(t[2]=(...e)=>g.handleFocusOut&&g.handleFocusOut(...e)),onFocusin:t[3]||(t[3]=(...e)=>g.handleFocusIn&&g.handleFocusIn(...e))},[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["dropdown ember-view input-group-prepend w-100",{"v-dropdown":o.isVertical}])},[(0,r.createElementVNode)("div",i,[(0,r.withDirectives)((0,r.createElementVNode)("input",{placeholder:o.placeholder,class:(0,r.normalizeClass)(["form-control cursor-pointer search-key-input",{"rounded-bottom-0":e.searchActive,"is-loading":g.isRequesting}]),type:"text",onFocus:t[0]||(t[0]=t=>e.searchActive=!0),"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchKey=t)},null,42,c),[[r.vModelText,e.searchKey]])]),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["dropdown-menu ember-view scrollmenu w-100",{show:e.searchActive}])},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(g.filteredRows,((t,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{class:(0,r.normalizeClass)(["dropdown-item search-item pl-7",{active:e.selectedRow[o.primaryKey]==t[o.primaryKey]}]),type:"button",onClick:e=>g.handleChange(t),key:"item"+a},[e.selectedRow[o.primaryKey]==t[o.primaryKey]?((0,r.openBlock)(),(0,r.createElementBlock)("svg",m,u)):(0,r.createCommentVNode)("",!0),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(t[o.label]),1)],10,d)))),128)),g.isRequesting||e.rows.length?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("span",h,"No data to display")),(0,r.renderSlot)(e.$slots,"footer",{},void 0,!0)],2)],2)])])])],32)}var v={name:"ZohoSearch",emits:["selected","update:modelValue"],props:{modelValue:Number,url:{type:String,required:!1},label:{type:String,required:!0},placeholder:{type:String,required:!0},loadDefaults:{type:Boolean,default:!1,required:!1},isVertical:{type:Boolean,default:!1,required:!1},records:{type:Array,default:function(){return[]}},primaryKey:{type:String,default:"id"},fetchFlag:{type:String,default:"AUTOCOMPLETE_REQUEST"},defaultRow:{type:Object,default:function(){return{}}}},data:()=>({rows:[],searchKey:null,selectedRow:{},searchActive:!1}),computed:{isRequesting(){return this.isProcessing(this.fetchFlag)},filteredRows(){let e=this.rows,t=this.searchKey&&this.searchKey.toLowerCase();return t&&(e=e.filter((e=>String(e[this.label]).toLowerCase().indexOf(t)>-1)),e.length||t.trim().length>2&&(this.$store.commit("SET_REQUEST_FLAG",this.fetchFlag),(async t=>{const o=-1===this.url.indexOf("?")?`${this.url}?query=${t}`:`${this.url}&query=${t}`,r=await this.$http.get(o);e=r.data.rows||r.data||[]})(t))),e}},created(){if(this.records.length&&(this.rows=[...this.records]),Object.keys(this.defaultRow).length&&(this.searchKey=this.defaultRow[this.label],this.selectedRow=this.defaultRow),this.modelValue){let e=this.rows.find((e=>e[this.primaryKey]==this.modelValue));e&&(this.searchKey=e[this.label],this.selectedRow=e)}},watch:{$props:{handler(){if(Object.keys(this.defaultRow).length?(this.searchKey=this.defaultRow[this.label],this.selectedRow=this.defaultRow):(this.searchKey=null,this.selectedRow={}),this.records.length&&(this.rows=[...this.rows,...this.records]),this.modelValue){const e=this.rows.find((e=>e[this.primaryKey]==this.modelValue));e&&(this.searchKey=e[this.label],this.selectedRow=e)}else this.searchKey=null,this.selectedRow={}},deep:!0}},mounted(){this.loadDefaults&&this.getDefaultData()},methods:{handleFocusIn(e){"BUTTON"==e.target.nodeName||"A"==e.target.nodeName?e.target.click():"INPUT"==e.target.nodeName&&(this.searchKey=null)},handleFocusOut(e){("INPUT"==e.target.nodeName||e.target.classList.contains("search-item"))&&setTimeout((()=>{this.searchActive=!1}),1)},getDefaultData(e=null){let t=e||this.url;this.$store.commit("SET_REQUEST_FLAG",this.fetchFlag),this.$http.get(t).then((e=>{e.data.rows?this.rows=[...this.rows,...e.data.rows]:this.rows=[...this.rows,...e.data]}))},handleSearch(e){e.trim().length>0&&(this.$store.commit("SET_REQUEST_FLAG",this.fetchFlag),this.$http.get(`${this.url}?query=${e}`).then((e=>{e.data.rows?this.rows=e.data.rows:this.rows=e.data||[]})))},handleChange(e){this.searchKey=e[this.label],e[this.primaryKey]!=this.selectedRow[this.primaryKey]&&(this.selectedRow=e,this.$emit("selected",e),this.$emit("update:modelValue",e[this.primaryKey])),this.searchActive=!1},clearAll(){this.selectedRow={},this.rows=[]}}},f=o(9646);const E=(0,f.Z)(v,[["render",g],["__scopeId","data-v-3dd0a9aa"]]);var V=E},1454:function(e,t,o){o.d(t,{Z:function(){return U}});var r=o(1005);const a={id:"print-container"},l={class:"fs-5 text-center py-1 border-bottom border-dashed"},n={class:"site-log"},s=["src","alt"],i={class:"h5 mb-1"},c={class:"mb-0 h6"},d={class:"mb-0 h6"},m={key:0},p={class:"mb-0 h6"},u={class:"mb-0 h6"},h={key:0,class:"py-1 border-bottom border-dashed"},g={class:"table table-sm table-borderless mb-1"},v={colspan:"2"},f={class:""},E={colspan:"2"},V={class:""},N={colspan:"2"},y={class:""},b={colspan:"2"},w={class:""},k={class:"text-end text-nowrap"},x={class:"py-1 border-bottom border-dashed"},_={class:"table table-sm table-borderless mb-1"},C={class:"text-end text-nowrap"},S={class:"py-1 border-bottom border-dashed"},B={class:"table table-sm table-borderless mb-0"},T=(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("span",{class:"fw-bolder"},"Grand Total")],-1),D={class:"text-end text-nowrap"},O={class:"h6 mb-0"},A={class:"py-1 text-center"},$={class:"table table-sm table-borderless mb-0"},M={colspan:"2"},R={key:0,class:"h6 mb-0"},L=(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",{colspan:"2"},[(0,r.createElementVNode)("div",{class:"text-center",style:{"font-size":"12px"}}," This is not a legal receipt. Please ask your legal receipt. ")])],-1),z=(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",{colspan:"2"},[(0,r.createElementVNode)("span",{class:"h5 mb-0"},[(0,r.createElementVNode)("em",null,"Thank you!")])])],-1);function F(e,t,o,F,I,P){return(0,r.openBlock)(),(0,r.createElementBlock)("div",a,[o.invoiced?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("img",{src:e.getSiteLogo(),style:{width:"150px"},alt:e.appSettings?.site_name},null,8,s)]),(0,r.createElementVNode)("p",i,[(0,r.createElementVNode)("b",null,(0,r.toDisplayString)(e.appSettings.site_name),1)]),(0,r.createElementVNode)("p",c,"TIN: "+(0,r.toDisplayString)(e.appSettings.app_tin),1),(0,r.createElementVNode)("p",d,[(0,r.createTextVNode)(" Tel: "+(0,r.toDisplayString)(e.appSettings.app_phone)+" ",1),e.appSettings?.contact_one?((0,r.openBlock)(),(0,r.createElementBlock)("span",m,"/"+(0,r.toDisplayString)(e.appSettings?.contact_one),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("p",p,"Email:"+(0,r.toDisplayString)(e.appSettings?.app_email),1),(0,r.createElementVNode)("p",u,"Address: "+(0,r.toDisplayString)(e.appSettings?.site_address),1)]),e.$helper.empty(o.order)?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",h,[(0,r.createElementVNode)("table",g,[(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",v,[(0,r.createElementVNode)("span",f,[(0,r.createTextVNode)("INVOICE NO: "),(0,r.createElementVNode)("b",null,"#"+(0,r.toDisplayString)(e.$helper.generateVoucherNo(o.order.id)),1)])])]),(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",E,[(0,r.createElementVNode)("span",V,[(0,r.createTextVNode)("Customer: "),(0,r.createElementVNode)("b",null,(0,r.toDisplayString)(o.order?.client?.name||"Walk-In"),1)])])]),(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",N,[(0,r.createElementVNode)("span",y,[(0,r.createTextVNode)("Served By: "),(0,r.createElementVNode)("b",null,(0,r.toDisplayString)(o.order.waiter?o.order.waiter.name:"Administrator"),1)])])]),(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",b,[(0,r.createElementVNode)("span",w,[(0,r.createTextVNode)("Table: "),(0,r.createElementVNode)("b",null,(0,r.toDisplayString)(o.order?.table?.name),1)])])]),(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("span",null,[(0,r.createTextVNode)("Date: "),(0,r.createElementVNode)("b",null,(0,r.toDisplayString)(e.$helper.formatDate(o.order.created_at)),1)])]),(0,r.createElementVNode)("td",k,[(0,r.createElementVNode)("span",null,[(0,r.createElementVNode)("b",null,(0,r.toDisplayString)(e.$helper.formatTime(o.order.created_at)),1)])])])])]))],64)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",x,[(0,r.createElementVNode)("table",_,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.order.items,((t,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("tr",{key:"order_items"+o},[(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(t.name),1)]),(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(t.quantity)+" x "+(0,r.toDisplayString)(e.$helper.formatNumber(t.price)),1)]),(0,r.createElementVNode)("td",C,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$helper.formatNumber(t.amount)),1)])])))),128))])]),o.invoiced?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createElementVNode)("div",S,[(0,r.createElementVNode)("table",B,[(0,r.createElementVNode)("tr",null,[T,(0,r.createElementVNode)("td",D,[(0,r.createElementVNode)("span",O,(0,r.toDisplayString)(e.formatMoney(o.order.grand_total)),1)])])])]),(0,r.createElementVNode)("div",A,[(0,r.createElementVNode)("table",$,[(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",M,[e.appSettings?.momo_code?((0,r.openBlock)(),(0,r.createElementBlock)("span",R,"Dial "+(0,r.toDisplayString)(e.appSettings?.momo_code)+" to pay with MOMO",1)):(0,r.createCommentVNode)("",!0)])]),L,z])])],64)):(0,r.createCommentVNode)("",!0)])}var I={name:"ReceiptOne",props:{order:{type:Object,required:!0},invoiced:{type:Boolean,required:!1,default:!0}},mounted(){},unmounted(){}},P=o(9646);const H=(0,P.Z)(I,[["render",F]]);var U=H},3618:function(e,t,o){o.d(t,{Z:function(){return $}});var r=o(1005);const a={class:"row"},l={class:"col-md-6"},n={class:"form-group mb-3"},s=(0,r.createElementVNode)("label",{class:"form-label"},"First Name",-1),i={class:"col-md-6"},c={class:"form-group mb-3"},d=(0,r.createElementVNode)("label",{class:"form-label"},"Last Name",-1),m={class:"row"},p={class:"col-md-6"},u={class:"form-group mb-3"},h=(0,r.createElementVNode)("label",{class:"form-label"},"Phone Number",-1),g={class:"col-md-6"},v={class:"form-group mb-3"},f=(0,r.createElementVNode)("label",{class:"form-label"},"Email",-1),E={class:"col-md-6"},V={class:"form-group mb-3"},N=(0,r.createElementVNode)("label",{class:"form-label"},"TIN number",-1),y={class:"col-md-6"},b={class:"form-group mb-3"},w=(0,r.createElementVNode)("label",{class:"form-label"},"Address",-1),k={class:"col-md-6"},x={class:"form-group mb-3"},_=(0,r.createElementVNode)("label",{class:"form-label"},"Discount(%)",-1),C=(0,r.createElementVNode)("div",{class:"col-md-6"},null,-1),S={class:"my-1"};function B(e,t,o,B,T,D){const O=(0,r.resolveComponent)("wolf-button"),A=(0,r.resolveComponent)("bootstrap-modal");return(0,r.openBlock)(),(0,r.createBlock)(A,{onClose:t[7]||(t[7]=t=>e.$emit("closed")),modalSize:"default",showFooter:!1,"is-compact":!0},{head:(0,r.withCtx)((()=>[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.newClient.id?"Update Client":"Add a new Client"),1)])),body:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",n,[s,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.newClient.first_name=t),name:"First Name",class:"form-control"},null,512),[[r.vModelText,e.newClient.first_name]])])]),(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("div",c,[d,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.newClient.last_name=t),name:"Last Name",class:"form-control"},null,512),[[r.vModelText,e.newClient.last_name]])])])]),(0,r.createElementVNode)("div",m,[(0,r.createElementVNode)("div",p,[(0,r.createElementVNode)("div",u,[h,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.newClient.phone=t),class:"form-control"},null,512),[[r.vModelText,e.newClient.phone]])])]),(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("div",v,[f,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.newClient.email=t),class:"form-control"},null,512),[[r.vModelText,e.newClient.email]])])]),(0,r.createElementVNode)("div",E,[(0,r.createElementVNode)("div",V,[N,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=t=>e.newClient.tin_number=t),class:"form-control"},null,512),[[r.vModelText,e.newClient.tin_number]])])]),(0,r.createElementVNode)("div",y,[(0,r.createElementVNode)("div",b,[w,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=t=>e.newClient.address=t),class:"form-control"},null,512),[[r.vModelText,e.newClient.address]])])]),(0,r.createElementVNode)("div",k,[(0,r.createElementVNode)("div",x,[_,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=t=>e.newClient.discount=t),class:"form-control"},null,512),[[r.vModelText,e.newClient.discount]])])]),C]),(0,r.createElementVNode)("div",S,[(0,r.createVNode)(O,{class:"btn btn-primary",activator:"SAVING_CLIENT",disabler:!e.newClient.first_name,onClicked:D.handleSubmit},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)(" Save and closed ")])),_:1},8,["disabler","onClicked"])])])),_:1})}var T=o(2327),D={name:"ClientCreator",props:["client"],emits:["saved","closed"],components:{BootstrapModal:T.Z},data:()=>({newClient:{first_name:null,last_name:null,email:null,phone:null,address:null,discount:0,tin_number:null,receive:0,store:0,status:1,type:"SIGNED"}}),created(){this.$helper.empty(this.client)||(this.newClient=this.client)},methods:{handleSubmit(){let e=this.newClient.id?"clients/update":"clients/create";this.$http.post(e,this.$helper.generateFormData(this.newClient)).then((e=>{e.data.status&&(this.$emit("saved",e.data.client),this.$helper.resetObjectValues(this.newClient))}))}}},O=o(9646);const A=(0,O.Z)(D,[["render",B]]);var $=A}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,r,a,l){if(!r){var n=1/0;for(d=0;d<e.length;d++){r=e[d][0],a=e[d][1],l=e[d][2];for(var s=!0,i=0;i<r.length;i++)(!1&l||n>=l)&&Object.keys(o.O).every((function(e){return o.O[e](r[i])}))?r.splice(i--,1):(s=!1,l<n&&(n=l));if(s){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[r,a,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,r){return o.f[r](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/mainChuck.f9d2e8b1.js"}}(),function(){o.miniCssF=function(e){return"css/mainChuck.d4526e40.css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="tame-pos:";o.l=function(r,a,l,n){if(e[r])e[r].push(a);else{var s,i;if(void 0!==l)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var m=c[d];if(m.getAttribute("src")==r||m.getAttribute("data-webpack")==t+l){s=m;break}}s||(i=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+l),s.src=r),e[r]=[a];var p=function(t,o){s.onerror=s.onload=null,clearTimeout(u);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(o)})),t)return t(o)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),i&&document.head.appendChild(s)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/pos/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,r,a){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css";var n=function(o){if(l.onerror=l.onload=null,"load"===o.type)r();else{var n=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.type=n,i.request=s,l.parentNode&&l.parentNode.removeChild(l),a(i)}};return l.onerror=l.onload=n,l.href=t,o?o.parentNode.insertBefore(l,o.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var a=o[r],l=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(l===e||l===t))return a}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){a=n[r],l=a.getAttribute("data-href");if(l===e||l===t)return a}},r=function(r){return new Promise((function(a,l){var n=o.miniCssF(r),s=o.p+n;if(t(n,s))return a();e(r,s,null,a,l)}))},a={670:0};o.f.miniCss=function(e,t){var o={263:1};a[e]?t.push(a[e]):0!==a[e]&&o[e]&&t.push(a[e]=r(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){var e={670:0};o.f.j=function(t,r){var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var l=new Promise((function(o,r){a=e[t]=[o,r]}));r.push(a[2]=l);var n=o.p+o.u(t),s=new Error,i=function(r){if(o.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var l=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+l+": "+n+")",s.name="ChunkLoadError",s.type=l,s.request=n,a[1](s)}};o.l(n,i,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,l,n=r[0],s=r[1],i=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(i)var d=i(o)}for(t&&t(r);c<n.length;c++)l=n[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(d)},r=self["webpackChunktame_pos"]=self["webpackChunktame_pos"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998,64],(function(){return o(1904)}));r=o.O(r)})();
//# sourceMappingURL=front-office.8c79a7e4.js.map