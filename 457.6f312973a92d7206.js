"use strict";(self.webpackChunktame_accommodation=self.webpackChunktame_accommodation||[]).push([[457],{3457:(g,d,n)=>{n.r(d),n.d(d,{HallsComponent:()=>P});var m=n(6814),p=n(1384),_=n(6166),b=n(6084),l=n(739),c=n(9416),u=n(7945),s=n(6223),v=n(3780),Z=n(4966),t=n(9212),M=n(8950),T=n(8185),A=n(7911),E=n(7612),U=n(6025);const C=["hallModal"],D=["hallImage"];function O(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"li")(1,"a",49),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,o=t.oxw();return t.KtG(o.showHallModal(a))}),t._UZ(2,"i",50),t._uU(3," Edit "),t.qZA()()}}function x(r,h){if(1&r){const e=t.EpF();t.TgZ(0,"li")(1,"a",51),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,o=t.oxw();return t.KtG(o.handleDestroy(a))}),t._UZ(2,"i",52),t._uU(3," Delete "),t.qZA()()}}function I(r,h){if(1&r&&(t.TgZ(0,"tr",42)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"app-lazy-image",43),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"formatMoney"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td")(17,"div",44)(18,"button",45),t._UZ(19,"i",46),t.qZA(),t.TgZ(20,"ul",47),t.YNc(21,O,4,0,"li",48)(22,x,4,0,"li",48),t.qZA()()()()),2&r){const e=h.$implicit,i=t.oxw();t.xp6(2),t.hij("#",e.id,""),t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(2),t.Q6J("src",i.getHallImage(null==e?null:e.image)),t.xp6(2),t.Oqu(null==e||null==e.branch?null:e.branch.name),t.xp6(2),t.Oqu(t.lcZ(11,9,null==e?null:e.price)),t.xp6(3),t.Oqu(null==e?null:e.location),t.xp6(2),t.Oqu(null==e?null:e.description),t.xp6(6),t.Q6J("ngIf",i.ps.hasPermissionTo("U")),t.xp6(1),t.Q6J("ngIf",i.ps.hasPermissionTo("D"))}}let P=(()=>{class r{constructor(e,i,a,o,f,y){this.paginationService=e,this.hallService=i,this.toastService=a,this.uiService=o,this.fb=f,this.ps=y,this.hallForm=this.fb.group({branch_id:[null],name:["",s.kI.required],location:[""],description:[""],image:[null],price:[0]}),this.rows=[],this.columns=[{title:"S/N"},{title:"Title",sortable:!0},{title:"Image"},{title:"Branch",sortable:!0},{title:"Price",sortable:!0},{title:"location",sortable:!0},{title:"description",sortable:!0}]}ngOnInit(){this.paginationService.rows$.subscribe(e=>{this.rows=e})}getHallImage(e){return u._.getImageFromServer(e)}showHallModal(e){e&&(this.hallForm.patchValue(e),this.existingHallImage=e.image),this.hallModal.show()}handleSubmit(){const e=u._.generateFormData(this.hallForm.value),i=this.hallImage.getUploadedFile();i&&i.length&&e.append("image",i[0],i[0]?.name),this.hallService.save(e).subscribe(a=>{const{row:o}=a;this.rows.unshift(o),this.toastService.setMessage({type:"success",text:"Hall saved successfully"}),this.hallForm.reset()})}handleDestroy(e){this.uiService.confirm({title:"Deleting a hall",content:"Are you sure you want to this hall:"+e.name,action:()=>{this.hallService.delete(e.id).subscribe(()=>{const i=this.rows.findIndex(a=>a.id==e.id);-1!==i&&(this.rows.splice(i,1),this.toastService.setMessage({type:"success",text:"Record deleted successfully"}))})}})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(M.N),t.Y36(T.m),t.Y36(A.k),t.Y36(E.F),t.Y36(s.qu),t.Y36(U.q))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-halls"]],viewQuery:function(i,a){if(1&i&&(t.Gf(C,5),t.Gf(D,5)),2&i){let o;t.iGM(o=t.CRH())&&(a.hallModal=o.first),t.iGM(o=t.CRH())&&(a.hallImage=o.first)}},standalone:!0,features:[t.jDz],decls:64,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],["href","javascript: void(0);"],[1,"breadcrumb-item","active"],["url","halls",3,"columns"],["href","javascript:void(0)","prevent","","action","",1,"btn","btn-primary",3,"click"],[1,"ri-add-line","me-1","fs-16","align-middle"],["filters","",1,"d-flex","py-3","align-items-center","gap-3"],["rows","",4,"ngFor","ngForOf"],[3,"customId"],["hallModal",""],["title",""],["body",""],[1,"auth-input",3,"formGroup","ngSubmit"],[1,"row","gy-1","gx-1"],[1,"mb-0"],["for","title",1,"form-label","required"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"col-lg-12"],["for","branch",1,"form-label","required"],["url","branches/show","label","name","placeholder","Select Branch","fetchFlag","SEARCHING_BRANCHS",3,"loadDefaults","selection","selectionChange"],[1,"d-flex","justify-content-center","w-100","pt-3"],[1,"text-center"],[1,"h5"],[3,"url"],["hallImage",""],[1,"col-6"],["for","price",1,"form-label","required"],["type","number","id","price","placeholder","Price","formControlName","price",1,"form-control"],["for","locaion",1,"form-label"],["type","text","id","location","formControlName","location",1,"form-control"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Optional Comments",1,"form-control"],["footer","",1,"row"],["type","button",1,"btn","btn-light","w-100"],["task","ADDING_HALL","classes","btn btn-primary w-100","type","button",1,"w-100",3,"disabled","clicked"],["caption",""],["rows",""],["classes","avatar-xs rounded me-2",3,"src"],[1,""],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-soft-primary","btn-sm","dropdown"],[1,"ri-more-fill","align-middle","fs-18"],[1,"dropdown-menu","dropdown-menu-end"],[4,"ngIf"],["href","javascript:void(0);","prevent","",1,"dropdown-item",3,"click"],[1,"ri-pencil-fill","fs-18","align-middle","me-2","text-muted"],["href","javascript:void(0)","prevent","",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ri-delete-bin-line","fs-18","align-middle","me-2","text-muted"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t._uU(4,"Halls List"),t.qZA(),t.TgZ(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),t._uU(9,"Halls"),t.qZA()(),t.TgZ(10,"li",8),t._uU(11,"List"),t.qZA()()()()()(),t.TgZ(12,"app-pagination",9)(13,"a",10),t.NdJ("click",function(){return a.showHallModal()}),t._UZ(14,"i",11),t._uU(15," Add New "),t.qZA(),t._UZ(16,"div",12),t.YNc(17,I,23,11,"tr",13),t.qZA(),t.TgZ(18,"app-off-canvas",14,15)(20,"span",16),t._uU(21,"Add A Hall"),t.qZA(),t.TgZ(22,"div",17)(23,"form",18),t.NdJ("ngSubmit",function(){return a.handleSubmit()}),t.TgZ(24,"div",19)(25,"div",1)(26,"div",20)(27,"label",21),t._uU(28,"Hall Name"),t.qZA(),t._UZ(29,"input",22),t.qZA()(),t.TgZ(30,"div",23)(31,"label",24),t._uU(32,"Branch"),t.qZA(),t.TgZ(33,"app-bootstrap-select",25),t.NdJ("selectionChange",function(f){return a.hallForm.value.branch_id=f}),t.qZA()(),t.TgZ(34,"div",1)(35,"div",26)(36,"div",27)(37,"label",28),t._uU(38,"Hall Image"),t.qZA(),t._UZ(39,"app-upload-field",29,30),t.qZA()()(),t.TgZ(41,"div",31)(42,"div",20)(43,"label",32),t._uU(44,"Price"),t.qZA(),t._UZ(45,"input",33),t.qZA()(),t.TgZ(46,"div",31)(47,"div",20)(48,"label",34),t._uU(49,"Location"),t.qZA(),t._UZ(50,"input",35),t.qZA()(),t.TgZ(51,"div",1)(52,"div",20)(53,"label",36),t._uU(54,"Description"),t.qZA(),t._UZ(55,"textarea",37),t.qZA()()()()(),t.TgZ(56,"div",38)(57,"div",31)(58,"button",39),t._uU(59,"Reset"),t.qZA()(),t.TgZ(60,"div",31)(61,"app-button",40),t.NdJ("clicked",function(){return a.handleSubmit()}),t.TgZ(62,"span",41),t._uU(63,"Save"),t.qZA()()()()()),2&i&&(t.xp6(12),t.Q6J("columns",a.columns),t.xp6(5),t.Q6J("ngForOf",a.rows),t.xp6(1),t.Q6J("customId","hallModal"),t.xp6(5),t.Q6J("formGroup",a.hallForm),t.xp6(10),t.Q6J("loadDefaults",!0)("selection",a.hallForm.value.branch_id),t.xp6(6),t.Q6J("url",a.existingHallImage?a.getHallImage(a.existingHallImage):null),t.xp6(22),t.Q6J("disabled",!a.hallForm.valid))},dependencies:[b.Q,m.ax,m.O5,l.X,p.r,_.i,c.s,s.UX,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,v.v,Z.l]})}return r})()},4966:(g,d,n)=>{n.d(d,{l:()=>p});var m=n(9212);let p=(()=>{class _{transform(l,...c){return c[0]?"RWF "+this.formatNumber(l):(l.toString().indexOf(".")>-1&&(l=Number(l).toFixed(0)),"RWF "+l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}formatNumber(l){return 999<Math.abs(l)&&Math.abs(l)<999999?Math.sign(l)*Number((Math.abs(l)/1e3).toFixed(1))+"K":999999<Math.abs(l)&&Math.abs(l)<999999999?Math.sign(l)*Number((Math.abs(l)/1e6).toFixed(1))+"M":999999999<Math.abs(l)&&Math.abs(l)<999999999999?Math.sign(l)*Number((Math.abs(l)/1e9).toFixed(1))+"B":999999999999<Math.abs(l)?Math.sign(l)*Number((Math.abs(l)/1e12).toFixed(1))+"T":""+Math.sign(l)*Math.abs(l)}static#t=this.\u0275fac=function(c){return new(c||_)};static#e=this.\u0275pipe=m.Yjl({name:"formatMoney",type:_,pure:!0,standalone:!0})}return _})()}}]);