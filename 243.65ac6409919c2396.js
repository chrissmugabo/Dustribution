"use strict";(self.webpackChunktame_accommodation=self.webpackChunktame_accommodation||[]).push([[243],{7243:(v,c,i)=>{i.r(c),i.d(c,{LoginComponent:()=>f});var d=i(1384),e=i(6223),l=i(553),t=i(9212),u=i(9397),m=i(1474);let g=(()=>{class n{constructor(s){this.http=s}handleLogin(s){return this.http.post("auth/login",s).pipe((0,u.b)(o=>{const r=o.access_token;r&&localStorage.setItem("token",r)}))}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(m.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var h=i(7911),a=i(2333);let f=(()=>{class n{constructor(s,o,r){this.loginService=s,this.toastService=o,this.authService=r,this.passwordType="password",this.loginForm=new e.cw({email:new e.NI("",{validators:[e.kI.required],nonNullable:!0}),password:new e.NI("",{validators:[e.kI.required],nonNullable:!0})})}ngOnInit(){this.authService.active()&&(navigator.userAgent.indexOf("Firefox")>0?setTimeout(()=>{location.replace(l.N.publicPath+"dashboard")},3e3):location.replace(l.N.publicPath+"dashboard"))}handleLogin(){this.loginService.handleLogin(this.loginForm.value).subscribe({next:s=>{this.toastService.setMessage({type:"success",text:"Logged Successfully"}),navigator.userAgent.indexOf("Firefox")>0?setTimeout(()=>{location.replace(l.N.publicPath+"dashboard")},3e3):location.replace(l.N.publicPath+"dashboard")},error:s=>{401===s.status&&this.toastService.setMessage({type:"danger",text:"Invalid Password Or Username"})}})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(g),t.Y36(h.k),t.Y36(a.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:28,vars:2,consts:[[1,"auth-page-wrapper","py-5","position-relative","d-flex","align-items-center","justify-content-center","min-vh-100","bg-light"],[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-4"],[1,"card","overflow-hidden","border-0","shadow"],[1,"mb-0","border-0","shadow-none"],[1,"p-1","p-sm-2","m-lg-1"],[1,"text-center"],["src","./assets/logo.png","alt","Tame Accommodation",1,"img-fluid","mb-2",2,"width","200px"],[1,"text-dark","fs-20"],[1,"p-2"],[1,"auth-input",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","placeholder","Enter username","formControlName","email",1,"form-control"],["for","password-input",1,"form-label"],[1,"position-relative","auth-pass-inputgroup","mb-3"],["type","password","placeholder","Enter password","id","password-input","formControlName","password",1,"form-control","pe-5","password-input"],["type","button","id","password-addon",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon","h-100"],[1,"ri-eye-fill","align-middle"],[1,"mt-4","d-grid"],["task","LOGIN","classes","btn btn-primary btn-lg w-100","type","submit",3,"disabled"],["caption",""]],template:function(o,r){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._UZ(8,"img",8),t.TgZ(9,"h5",9),t._uU(10,"Sign in to continue."),t.qZA()(),t.TgZ(11,"div",10)(12,"form",11),t.NdJ("ngSubmit",function(){return r.handleLogin()}),t.TgZ(13,"div",12)(14,"label",13),t._uU(15,"Username"),t.qZA(),t._UZ(16,"input",14),t.qZA(),t.TgZ(17,"div",12)(18,"label",15),t._uU(19,"Password"),t.qZA(),t.TgZ(20,"div",16),t._UZ(21,"input",17),t.TgZ(22,"button",18),t._UZ(23,"i",19),t.qZA()()(),t.TgZ(24,"div",20)(25,"app-button",21)(26,"span",22),t._uU(27,"Sign In"),t.qZA()()()()()()()()()()()()),2&o&&(t.xp6(12),t.Q6J("formGroup",r.loginForm),t.xp6(13),t.Q6J("disabled",!r.loginForm.valid))},dependencies:[d.r,e.UX,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u]})}return n})()},1384:(v,c,i)=>{i.d(c,{r:()=>h});var d=i(6814),e=i(9212),l=i(9045);function t(a,f){1&a&&e._UZ(0,"span",4)}function u(a,f){1&a&&e.Hsn(0)}const m=[[["","caption",""]]],g=["[caption]"];let h=(()=>{class a{constructor(n){this.apiService=n,this.requests={},this.task="",this.classes="",this.type="submit",this.disabled=!1,this.clicked=new e.vpe}ngOnInit(){this.apiService.request$.subscribe(n=>{this.requests=n})}get isRequesting(){return!!this.requests&&Object.keys(this.requests).includes(this.task)}handleClick(){this.apiService.onGoingRequestFlag=this.task,this.clicked.emit()}static#t=this.\u0275fac=function(p){return new(p||a)(e.Y36(l.s))};static#e=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-button"]],inputs:{task:"task",classes:"classes",type:"type",disabled:"disabled"},outputs:{clicked:"clicked"},standalone:!0,features:[e.jDz],ngContentSelectors:g,decls:6,vars:5,consts:[[3,"type","disabled","ngClass","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf","ngIfElse"],[1,"visually-hidden"],["notRequesting",""],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(p,s){if(1&p&&(e.F$t(m),e.TgZ(0,"button",0),e.NdJ("click",function(){return s.handleClick()}),e.YNc(1,t,1,0,"span",1),e.TgZ(2,"span",2),e._uU(3,"Loading..."),e.qZA(),e.YNc(4,u,1,0,"ng-template",null,3,e.W1O),e.qZA()),2&p){const o=e.MAs(5);e.Q6J("type",s.type)("disabled",s.disabled)("ngClass",s.classes),e.xp6(1),e.Q6J("ngIf",s.isRequesting)("ngIfElse",o)}},dependencies:[d.mk,d.O5]})}return a})()}}]);